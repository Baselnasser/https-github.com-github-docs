---
title: "Этап\_6. Развертывание и масштабирование сканирования секретов"
intro: 'На последнем этапе вы сосредоточитесь на развертывании {% data variables.product.prodname_secret_scanning %}. {% data variables.product.prodname_secret_scanning_caps %} проще развертывать, чем {% data variables.product.prodname_code_scanning %}, так как оно требует меньше усилий для конфигурации, но при этом крайне важно иметь стратегию обработки новых и старых результатов.'
versions:
  ghes: '*'
  ghae: '*'
  ghec: '*'
topics:
  - Advanced Security
shortTitle: 6. Rollout secret scanning
miniTocMaxHeadingLevel: 3
ms.openlocfilehash: 15254d9a4d490f6eeff566cd71d94da7c6e8c467
ms.sourcegitcommit: e8c012864f13f9146e53fcb0699e2928c949ffa8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/09/2022
ms.locfileid: '148158760'
---
{% note %}

Эта статья является частью серии "Внедрение {% data variables.product.prodname_GH_advanced_security %} в большом масштабе". Предыдущая статья этой серии: [Этап 5. Развертывание и масштабирование проверки кода](/code-security/adopting-github-advanced-security-at-scale/phase-5-rollout-and-scale-code-scanning).

{% endnote %}

Можно включить сканирование секретов для отдельных репозиториев или для всех репозиториев в организации. Дополнительные сведения см. в разделах [Управление параметрами безопасности и анализа для репозитория](/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/managing-security-and-analysis-settings-for-your-repository) и [Управление параметрами безопасности и анализа для организации](/organizations/keeping-your-organization-secure/managing-security-and-analysis-settings-for-your-organization).

В этой статье в общем виде описывается процесс включения {% data variables.product.prodname_secret_scanning %} для всех репозиториев в организации. Принципы, описанные в этой статье, можно применять, даже если вы используете более поэтапный подход, включая {% data variables.product.prodname_secret_scanning %} для отдельных репозиториев. 

### 1. Сосредоточьтесь на недавно зафиксированных секретах

При включении {% data variables.product.prodname_secret_scanning %} следует сосредоточиться на исправлении всех вновь фиксируемых учетных данных, обнаруженных при сканировании секретов. Если вы сосредоточитесь на очистке уже зафиксированных учетных данных, разработчики могут продолжать случайно отправлять новые учетные данные, поэтому общее число секретов будет оставаться примерно на том же уровне, а не уменьшаться, как это может вам показаться. Поэтому важно перекрыть утечку новых учетных данных, прежде чем сосредоточиться на отзыве всех текущих секретов.

Существует несколько подходов для обнаружения новых фиксируемых учетных данных, один из них выглядит следующим образом.

1. **Уведомление**. Используйте веб-перехватчики, чтобы все новые оповещения о секретах показывались нужным командам как можно быстрее. Веб-перехватчик срабатывает при создании, разрешении или повторном открытии оповещения о секрете. Затем вы можете проанализировать полезные данные веб-перехватчика и интегрировать их в любые инструменты, которые используете вы и ваша команда, такие как Slack, Teams, Splunk и электронная почта. Дополнительные сведения см. в статьях [Внедрение веб-перехватчиков](/developers/webhooks-and-events/webhooks/about-webhooks) и [События и полезные данные веб-перехватчиков](/developers/webhooks-and-events/webhooks/webhook-events-and-payloads#secret_scanning_alert).
2. **Дальнейшие действия**. Создайте высокоуровневый процесс исправления, который работает для всех типов секретов. Например, вы можете обратиться к разработчику, который зафиксировал секрет и его техническим руководителем по данному проекту, подчеркнув опасность фиксации секретов в GitHub, а также попросите их отозвать и изменить обнаруженный секрет.

  {% note %}
  
  **Примечание.** Этот шаг можно автоматизировать. Для крупных предприятий и организаций с сотнями репозиториев выполнение этих действий вручную является нецелесообразным. Вы можете встроить автоматизацию в процесс веб-перехватчика, определенный на первом шаге. Полезные данные веб-перехватчика содержат сведения об утечке секретов в репозитории и организации. Используя эти сведения, вы можете связаться с текущими ответственными специалистами по репозиторию и отправить им электронное письмо или текстовое сообщение или открыть проблему.
  
  {% endnote %} 
3. **Обучение**. Создайте внутренний обучающий документ, предназначенный для разработчиков, которые фиксируют секреты. В этом обучающем документе вы можете объяснить риски, создаваемые фиксацией секретов, и предложить ознакомиться с рекомендациями по безопасному использованию секретов в разработке. Если разработчик не учится на своем опыте и продолжает фиксировать секреты, можно создать процесс эскалации, но обучения обычно достаточно.

Повторите последние два шага для утечки новых секретов. Этот процесс помогает разработчикам безопасно управлять секретами, используемыми в коде, и позволяет измерять сокращение числа вновь фиксируемых секретов.

{% note %}

**Примечание.** Более продвинутые организации могут захотеть выполнять автоматическое исправление определенных типов секретов. Существует инициатива с открытым кодом под названием [GitHub Secret Scanner Auto Remediator](https://github.com/NickLiffen/GSSAR), которую можно развернуть в среде AWS, Azure или GCP и настроить автоматическую отмену определенных типов секретов на основе того, что вы определяете как наиболее важное. Это также отличный способ реагировать на новые зафиксированные секреты с более автоматизированным подходом.

{% endnote %}

### 2. Исправление ранее зафиксированных секретов, начиная с наиболее важных

После внедрения процесса мониторинга, уведомления и исправления вновь публикуемых секретов можно начать работу с секретами, зафиксированными до включения {% data variables.product.prodname_GH_advanced_security %}.

Определение наиболее важных секретов зависит от процессов и интеграций в вашей организации. Например, компания, скорее всего, не беспокоится о входящих секретах веб-перехватчика Slack, если она не использует Slack. Возможно, вам будет полезно сначала сосредоточиться на пяти наиболее важных типах учетных данных для вашей организации.

После выбора типов секретов можно выполнить следующие действия.

1. Определите процесс исправления каждого типа секрета. Фактические процедуры для каждого типа секрета часто сильно отличаются. Запишите процесс для каждого типа секрета в документе или внутренней базе знаний.
  
  {% note %}
  
  **Примечание.** При создании процесса отзыва секретов постарайтесь возложить ответственность за отзыв секретов на команду, поддерживающую репозиторий, а не на центральную команду. Один из принципов GHAS заключается в том, что разработчики берут на себя ответственность за безопасность и несут ответственность за устранение проблем безопасности, особенно если это они их создали.

  {% endnote %}

2. Создав процесс отзыва учетных данных, вы можете сопоставить сведения о типах секретов и другие метаданные, связанные с утечками секретов, чтобы узнать, кому следует сообщить о новом процессе.
  
  {% ifversion not ghae %}
  
  Общие сведения о безопасности можно использовать для сбора этих сведений. Дополнительные сведения об использовании обзора безопасности см. [в разделе Фильтрация оповещений в обзоре безопасности](/code-security/security-overview/filtering-alerts-in-the-security-overview).
  
  {% endif %}
  
  Сведения, которые может потребоваться собрать, включают следующие.
  
    - План
    - Хранилище
    - Тип секрета
    - Значение секрета
    - Контакты ответственных за репозитории
  
  {% note %}
  
  **Примечание.** При утечке небольшого числа секретов данного типа используйте пользовательский интерфейс. Если у вас сотни утечек секретов, используйте API для сбора информации. Дополнительные сведения см. в статье о [REST API для сканирования секретов](/rest/reference/secret-scanning).
    
  {% endnote %}

3. После сбора сведений об утечках секретов создайте целевой план коммуникации для пользователей, которые обслуживают репозитории, связанные с каждым типом секрета. Вы можете использовать электронную почту, мессенджеры или даже создавать проблемы GitHub в затронутых репозиториях. Если вы можете использовать API, предоставляемые этими средствами для автоматической отправки сообщений, это упрощает масштабирование между несколькими типами секретов.

### 3. Развертывание программы для включения дополнительных типов секретов и пользовательских шаблонов

Теперь вы можете расширить рамку пяти наиболее важных типов секретов до более полного списка с дополнительным акцентом на обучение. Вы можете повторить предыдущий шаг, исправив ранее зафиксированные секреты для различных целевых типов секретов.

Вы также можете включить еще больше пользовательских шаблонов в дополнение с определенными на предыдущих этапах и предложить командам по безопасности и командам разработчиков отправить дополнительные шаблоны, создавая процесс отправки новых шаблонов по мере создания новых типов секретов. Дополнительные сведения см. в разделе [Определение пользовательских шаблонов для сканирования секретов](/code-security/secret-scanning/defining-custom-patterns-for-secret-scanning).

{% ifversion secret-scanning-push-protection %}

Вы также можете включить защиту от отправки с использованием сканирования секретов. После включения сканирования секретов оно проверяет наличие особо важных секретов и блокирует отправку. Дополнительные сведения см. в разделе [Защита push-уведомлений с помощью сканирования секретов](/code-security/secret-scanning/protecting-pushes-with-secret-scanning#using-secret-scanning-as-a-push-protection-from-the-command-line).

{% endif %}

Продолжая создавать процессы исправления для других типов секретов, начните создавать упреждающие учебные материалы, которые можно предоставить всем разработчикам GitHub в вашей организации. До этого момента основное внимание уделялось реактивным действиям. Рекомендуется сместить фокус на упреждающее поведение и в первую очередь призывать разработчиков не отправлять учетные данные в GitHub. Это можно достичь несколькими способами, но создание короткого документа, объясняющего риски и причины, является хорошей отправной точкой.

{% note %}

Это последняя статья в серии "Внедрение {% data variables.product.prodname_GH_advanced_security %} в большом масштабе". Если у вас остались вопросы или нужна поддержка, см. раздел "{% data variables.contact.github_support %} и {% data variables.product.prodname_professional_services_team %}" статьи [Общие сведения о внедрении {% data variables.product.prodname_GH_advanced_security %} в большом масштабе](/code-security/adopting-github-advanced-security-at-scale/introduction-to-adopting-github-advanced-security-at-scale#github-support-and-professional-services).

{% endnote %}
