---
title: Начало работы с API базы данных Git
intro: 'API базы данных Git предоставляет доступ на чтение и запись необработанных объектов Git в базе данных Git в {% data variables.product.product_name %}, а также на перечисление и обновление ссылок (заголовки ветвей и теги).'
versions:
  fpt: '*'
  ghes: '*'
  ghae: '*'
  ghec: '*'
topics:
  - API
shortTitle: Get started - Git Database API
ms.openlocfilehash: b7044e299602de42a2c880df8da4a6f19ef9334b
ms.sourcegitcommit: 47bd0e48c7dba1dde49baff60bc1eddc91ab10c5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/05/2022
ms.locfileid: '145135920'
---
## Общие сведения 

Вы можете повторно реализовывать множество функциональных возможностей Git через API — создавая необработанные объекты непосредственно в базе данных и обновляя ссылки на ветви, вы можете делать практически все, что позволяет делать Git, при этом не устанавливая Git.

Функции API базы данных Git возвращают значение `409 Conflict`, если репозиторий Git пуст или недоступен.  Недоступный репозиторий обычно означает, что {% data variables.product.product_name %} находится в процессе создания репозитория. Для пустого репозитория можно использовать конечную точку [Создание или обновление содержимого файла](/rest/reference/repos#create-or-update-file-contents), чтобы создать содержимое и инициализировать репозиторий, а затем использовать API базы данных Git. Если этот статус ответа сохраняется, вам поможет {% data variables.contact.contact_support %}.

![Схема базы данных Git](/assets/images/git-database-overview.png)

Дополнительные сведения о базе данных объектов Git см. в главе [Основы Git](http://git-scm.com/book/en/v1/Git-Internals) книги "Pro Git".

Например, если вы хотите зафиксировать изменение файла в репозитории, выполните следующие действия:

* Получите текущий объект фиксации.
* Извлеките дерево, на которое он указывает.
* Извлеките содержимое BLOB-объекта этого дерева для конкретного пути к файлу.
* Измените содержимое и опубликуйте новый BLOB-объект с новым содержимым, получив SHA BLOB-объекта.
* Опубликуйте новый объект дерева, заменив указатель пути к файлу на SHA BLOB-объекта, чтобы получить SHA дерева.
* Создайте объект фиксации с текущим SHA фиксации в качестве родительского и SHA нового дерева, получив SHA фиксации.
* Обновите ссылку на ветвь, чтобы указать на новый SHA фиксации.

Это может показаться сложной процедурой, но на самом деле все довольно просто, если вы понимаете принцип. Использование API дает вам много возможностей.

## Проверка возможности слияния запросов на вытягивание

{% warning %}

**Предупреждение.** Не используйте Git напрямую или [`GET /repos/{owner}/{repo}/git/refs/{ref}`](/rest/reference/git#get-a-reference) для обновлений ссылок Git `merge`, так как это содержимое устаревает без предупреждения.

{% endwarning %}

Потребляющий API должен явно запросить запрос на вытягивание для создания _тестовой_ фиксации слияния. _Тестовая_ фиксация слияния создается при просмотре запроса на вытягивание в пользовательском интерфейсе и отображении кнопки "Слияние" или при [получении](/rest/reference/pulls#get-a-pull-request), [создании](/rest/reference/pulls#create-a-pull-request) или [изменении](/rest/reference/pulls#update-a-pull-request) запроса на вытягивание с помощью REST API. Без этого запроса ссылки Git `merge` будут устаревать до того, как кто-то просмотрит запрос на вытягивание.

Если вы используете методы опроса, которые создают устаревшие ссылки Git `merge`, GitHub рекомендует выполнить следующие действия, чтобы получить последние изменения из ветви по умолчанию:

1. Получите веб-перехватчик запроса на вытягивание.
2. Вызовите [`GET /repos/{owner}/{repo}/pulls/{pull_number}`](/rest/reference/pulls#get-a-pull-request), чтобы запустить фоновое задание для создания кандидата на фиксацию слияния.
3. Опросите репозиторий, используя [`GET /repos/{owner}/{repo}/pulls/{pull_number}`](/rest/reference/pulls#get-a-pull-request), чтобы узнать, является ли атрибут `mergeable` `true` или `false`. Вы можете использовать Git напрямую или [`GET /repos/{owner}/{repo}/git/refs/{ref}`](/rest/reference/git#get-a-reference) для обновления только ссылок Git `merge` после выполнения предыдущих шагов.
