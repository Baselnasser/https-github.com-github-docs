---
title: Выпуск и обслуживание действий
shortTitle: Release and maintain actions
intro: Вы можете использовать автоматизацию и рекомендации с открытым кодом по выпуску и обслуживанию действий.
type: tutorial
topics:
  - Action development
  - Actions
  - Community
versions:
  fpt: '*'
  ghec: '*'
  ghes: '*'
  ghae: '*'
ms.openlocfilehash: 49e1da781c5e223e229f097dc04b8bd49bbb64ba
ms.sourcegitcommit: 7b86410fc3bc9fecf0cb71dda4c7d2f0da745b85
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/05/2022
ms.locfileid: '148009983'
---
{% data reusables.actions.enterprise-beta %} {% data reusables.actions.enterprise-github-hosted-runners %}

## Введение

После создания действия вы захотите продолжить выпуск новых функций при работе с вкладами от участников сообщества. В этом учебнике описан пример процесса выпуска и обслуживания действий с открытым кодом. Пример.

* Использует {% data variables.product.prodname_actions %} для непрерывной интеграции, обновлений зависимостей, управления выпусками и автоматизации задач.
* Обеспечивает надежность с помощью автоматических тестов и индикаторов сборки.
* Указывает, как можно использовать действие, желательно в рамках более широкого рабочего процесса.
* Сообщите, какой тип вкладов от участников сообщества вы приветствуете. (Например, проблемы, запросы на вытягивание или отчеты об уязвимостях.)

Пример этого процесса см. здесь: [github-developer/javascript-action](https://github.com/github-developer/javascript-action).

## Разработка и выпуск действий

В этом разделе мы рассмотрим пример процесса разработки и выпуска действий и покажем, как использовать {% data variables.product.prodname_actions %} для его автоматизации.

### Сведения о действиях JavaScript

Действия JavaScript — это репозитории Node.js с метаданными. Однако действия JavaScript имеют дополнительные свойства по сравнению с традиционными проектами Node.js:

* Зависимые пакеты фиксируются вместе с кодом, обычно в скомпилированной и минифицированной форме. Это означает, что автоматизированные сборки и безопасные вклады сообщества важны.

{% ifversion fpt or ghec %}

* Выпуски с тегами можно публиковать непосредственно в {% data variables.product.prodname_marketplace %} и использовать в рабочих процессах в {% data variables.product.prodname_dotcom %}.

{% endif %}

* Многие действия используют программные интерфейсы {% data variables.product.prodname_dotcom %} и сторонние API, поэтому мы рекомендуем комплексное тестирование.

### Настройка рабочих процессов {% data variables.product.prodname_actions %}

Для поддержки процесса разработки, описанного в следующем разделе, добавьте в репозиторий два рабочих процесса с данными {% data variables.product.prodname_actions %}.

1. Добавьте рабочий процесс, который активируется при отправке фиксации в ветвь компонента или в `main`, а также при создании запроса на вытягивание. Настройте рабочий процесс, чтобы он выполнял модульные и интеграционные тесты. В качестве примера ознакомьтесь с [этим рабочим процессом](https://github.com/github-developer/javascript-action/blob/963a3b9a9c662fd499419a240ed8c49411ff5add/.github/workflows/test.yml).
2. Добавьте рабочий процесс, который активируется при публикации или редактировании выпуска. Настройте рабочий процесс, чтобы обеспечить наличие семантических тегов. Вы можете использовать действие, например [JasonEtco/build-and-tag-action](https://github.com/JasonEtco/build-and-tag-action), для компиляции и объединения файла JavaScript и метаданных, а также принудительной отправки семантических тегов основных версий, дополнительных версий и исправлений. В качестве примера ознакомьтесь с [этим рабочим процессом](https://github.com/github-developer/javascript-action/blob/963a3b9a9c662fd499419a240ed8c49411ff5add/.github/workflows/publish.yml). Дополнительные сведения о семантических тегах см. в статье [Сведения о семантическом управлении версиями](https://docs.npmjs.com/about-semantic-versioning).

### Пример процесса разработчика

Ниже приведен пример процесса, который можно выполнить для автоматического выполнения тестов, создания выпуска{% ifversion fpt or ghec%} и публикации в {% data variables.product.prodname_marketplace %}{% endif %}, а также публикации действия.

1. Выполняйте работу над функциями в ветвях согласно стандартному процессу работы с GitHub. Дополнительные сведения см. в разделе [Процесс работы с GitHub](/get-started/quickstart/github-flow).
   * При отправке фиксации в ветвь функции рабочий процесс тестирования будет автоматически выполнять тесты.

2. Создавайте запросы на вытягивание из ветви `main`, чтобы инициировать обсуждение и проверку, а по завершении выполните слияние ветви.

   * При открытии запроса на вытягивание из ветви или вилки рабочий процесс тестирования снова выполнит тесты, на этот раз с фиксацией слияния.

   * **Примечание.** По соображениям безопасности рабочие процессы, активированные `pull_request` из вилок, имеют ограниченные разрешения `GITHUB_TOKEN` и не имеют доступа к секретам. Если тесты или другие рабочие процессы, активированные при запросе на вытягивание, требуют доступа к секретам, рассмотрите возможность использования другого события, например [ручного триггера](/actions/reference/events-that-trigger-workflows#manual-events) или [`pull_request_target`](/actions/reference/events-that-trigger-workflows#pull_request_target). Дополнительные сведения см. [здесь](/actions/reference/events-that-trigger-workflows#pull-request-events-for-forked-repositories).

3. Создайте выпуск с семантическими тегами. {% ifversion fpt or ghec %} Вы также можете опубликовать в {% data variables.product.prodname_marketplace %} с помощью простого флажка. {% endif %} Дополнительные сведения приведены в статье [Управление выпусками в репозитории](/github/administering-a-repository/managing-releases-in-a-repository#creating-a-release){% ifversion fpt or ghec %} и [Публикация действий в {% data variables.product.prodname_marketplace %}](/actions/creating-actions/publishing-actions-in-github-marketplace#publishing-an-action)"{% endif %}.

   * При публикации или изменении выпуска рабочий процесс выпуска будет автоматически выполнять компиляцию и настройку тегов.

   * Рекомендуем создавать выпуски с использованием тегов с семантическими версиями, например `v1.1.3`, и сохранять теги основной версии (`v1`) и дополнительной версии (`v1.1`) в соответствии с последней успешной фиксацией. Дополнительные сведения см. в статье [Сведения о настраиваемых действиях](/actions/creating-actions/about-custom-actions#using-release-management-for-actions) и [Сведения о семантическом управлении версиями](https://docs.npmjs.com/about-semantic-versioning).

### Результаты

В отличие от некоторых других стратегий автоматического управления выпусками, этот процесс намеренно не фиксирует зависимости в ветви `main`, а только в фиксации выпусков с тегами. Таким образом, вы призываете пользователей вашего действия ссылаться на именованные теги или `sha`, и помогаете обеспечить безопасность сторонних запросов на вытягивание, выполняя сборку самостоятельно во время выпуска.

Использование семантических выпусков означает, что пользователи ваших действий могут закреплять рабочие процессы в версии и быть уверенными, что они будут и дальше получать последние стабильные функции без критических изменений в зависимости от того, что им подходит:

## Работа с сообществом

{% data variables.product.product_name %} предоставляет инструменты и руководства для работы с сообществом открытого кода. Ниже приведено несколько средств, которые рекомендуется настроить для эффективной двухсторонней связи. Предоставляя следующие сигналы сообществу, вы побуждаете других пользователей использовать и изменять ваше действие и вносить свой вклад в его разработку:

* Приводите в `README` большое количество примеров использования и рекомендаций. Дополнительные сведения см. в статье [О файлах README](/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-readmes).
* Включите значок состояния рабочего процесса в файл `README`. Дополнительные сведения см. в статье [Добавление индикатора состояния рабочего процесса](/actions/managing-workflow-runs/adding-a-workflow-status-badge). Кроме того, посетите [shields.io](https://shields.io/), чтобы узнать о других значках, которые можно добавить.{% ifversion fpt or ghec %}
* Добавьте файлы с правилами взаимодействия и работы членов сообщества, такие как `CODE_OF_CONDUCT`, `CONTRIBUTING` и `SECURITY`. Дополнительные сведения см. в статье [Создание файла по умолчанию с правилами взаимодействия и работы членов сообщества](/github/building-a-strong-community/creating-a-default-community-health-file#supported-file-types).{% endif %}
* Поддерживайте проблемы в актуальном состоянии, используя такие действия, как [actions/stale](https://github.com/actions/stale).

## Дополнительные материалы

Примеры, в которых используются аналогичные шаблоны:

* [github/super-linter](https://github.com/github/super-linter)
* [octokit/request-action](https://github.com/octokit/request-action)
* [github-developer/javascript-action](https://github.com/github-developer/javascript-action)
