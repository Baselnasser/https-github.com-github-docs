---
title: Создание веб-перехватчиков
intro: 'Узнайте, как создать веб-перехватчик, выбрав события, которые веб-перехватчик будет прослушивать в {% data variables.product.prodname_dotcom %}, и как настроить сервер для получения полезных данных веб-перехватчика и управления ими.'
redirect_from:
  - /webhooks/creating
  - /developers/webhooks-and-events/creating-webhooks
versions:
  fpt: '*'
  ghes: '*'
  ghae: '*'
  ghec: '*'
topics:
  - Webhooks
ms.openlocfilehash: ced763e71ecc9f99d8dd5037dcdb6d87cfdba91d
ms.sourcegitcommit: 6b1c6174d0df40c90edfd7526496baabb1dd159d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2022
ms.locfileid: '148132974'
---
Теперь, когда мы понимаем [основы веб-перехватчиков][webhooks-overview], давайте рассмотрим процесс создания собственной интеграции на основе веб-перехватчика. В этом руководстве мы создадим веб-перехватчик репозитория, который будет отвечать за создание списка популярных репозиториев в зависимости от количества проблем, которые он получает в день.

Создание веб-перехватчика — это двухэтапный процесс. Сначала необходимо настроить события, которые должен прослушивать веб-перехватчик. После этого вы настроите сервер для получения полезных данных и управления ими.


{% data reusables.webhooks.webhooks-rest-api-links %}

## Предоставление локального узла в Интернете

В рамках этого руководства мы будем использовать локальный сервер для получения событий веб-перехватчика от {% data variables.product.prodname_dotcom %}. 

Прежде всего, необходимо предоставить локальную среду разработки в Интернете, чтобы {% data variables.product.prodname_dotcom %} доставить события. Мы будем использовать [`ngrok`](https://ngrok.com) для этого.

{% ifversion cli-webhook-forwarding %} {% примечание %}

**Примечание:** Кроме того, вы можете использовать перенаправление веб-перехватчиков, чтобы настроить локальную среду для получения веб-перехватчиков. Дополнительные сведения см. в разделе [Получение веб-перехватчиков с помощью GitHub CLI](/developers/webhooks-and-events/webhooks/receiving-webhooks-with-the-github-cli).

{% endnote %} {% endif %}

`ngrok` предоставляется бесплатно для всех основных операционных систем. Дополнительные сведения см. на [`ngrok`странице загрузки](https://ngrok.com/download).

После установки `ngrok` вы можете предоставить локальный узел, выполнив команду `./ngrok http 4567` в командной строке. `4567` — номер порта, по которому сервер будет ожидать передачи сообщений. Должна появиться строка, которая выглядит примерно так:

```shell
$ Forwarding  http://7e9ea9dc.ngrok.io -> 127.0.0.1:4567
```

Запишите URL-адрес `*.ngrok.io`. Мы будем использовать его для настройки веб-перехватчика.

## Настройка веб-перехватчика

Веб-перехватчики можно установить в организации или в определенном репозитории.

Чтобы настроить веб-перехватчик, перейдите на страницу параметров репозитория или организации. После этого щелкните **Веб-перехватчики**, а затем выберите **Добавить веб-перехватчик**.

Кроме того, можно создать веб-перехватчик и управлять им [с помощью API веб-перехватчиков][webhook-api].

Прежде чем веб-перехватчики можно будет использовать, в них требуется настроить несколько параметров конфигурации. Мы разберем каждый из этих параметров ниже.

## URL-адрес полезных данных

{% data reusables.webhooks.payload_url %}

Так как мы выполняем разработку локально для нашего руководства, мы настроим его на URL-адрес `*.ngrok.io`, а затем `/payload`. Например, `http://7e9ea9dc.ngrok.io/payload`.

## Тип содержимого

{% data reusables.webhooks.content_type %} В рамках этого учебника достаточно выбрать тип содержимого по умолчанию `application/json`.

## Секрет

{% data reusables.webhooks.secret %}

## Проверка SSL

{% data reusables.webhooks.webhooks_ssl %}

## Активен

По умолчанию доставки веб-перехватчика имеют статус "Активно". Вы можете отключить доставку полезных данных веб-перехватчика, отменив выбор статуса "Активный".

## События

События — центральный компонент веб-перехватчиков. Эти веб-перехватчики запускаются всякий раз, когда определенное действие выполняется для репозитория, который URL-адрес полезных данных вашего сервера перехватывает и реагирует на него.

Полный список событий веб-перехватчика и условия, при которых они могут срабатывать, можно найти в [справочнике по API веб-перехватчика][hooks-api].

Так как наш веб-перехватчик работает с проблемами в репозитории, мы нажмем кнопку **Разрешить мне выбрать отдельные события**, а затем **Проблемы**. Обязательно установите флажок **Активен**, чтобы получать события проблем для активированных веб-перехватчиков. Кроме того, можно выбрать все события с помощью команды по умолчанию.

После этого нажмите кнопку **Добавить веб-перехватчик**. 

После создания веб-перехватчика пора настроить локальный сервер для тестирования веб-перехватчика. Перейдите к разделу [Настройка сервера](/webhooks/configuring/), чтобы узнать, как это сделать.

### Событие с подстановочными знаками

Чтобы настроить веб-перехватчик для всех событий, используйте подстановочный знак (`*`) для указания событий веб-перехватчика. При добавлении события с подстановочными знаками мы заменим все настроенные существующие события, на события с подстановочными знаками, и отправим полезные данные для всех поддерживаемых событий. Вы также автоматически будете получать новые события, добавляемые в будущем.

[webhooks-overview]: /webhooks/
[webhook-api]: /rest/reference/repos#hooks
[hooks-api]: /webhooks/#events
