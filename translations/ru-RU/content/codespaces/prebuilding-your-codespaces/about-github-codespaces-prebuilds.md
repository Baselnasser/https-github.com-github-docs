---
title: Сведения о предварительных сборках в GitHub Codespaces
shortTitle: About prebuilds
intro: 'Предварительные сборки {% data variables.product.prodname_github_codespaces %} помогают ускорить создание новых пространств кода для больших или сложных репозиториев.'
versions:
  fpt: '*'
  ghec: '*'
topics:
  - Codespaces
redirect_from:
  - /codespaces/prebuilding-your-codespaces/about-codespaces-prebuilds
ms.openlocfilehash: eecb77b541cc735fcf788fbc5da6960cabad899d
ms.sourcegitcommit: 9af8891fea10039b3374c76818634e05410e349d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/06/2022
ms.locfileid: '148191921'
---
## Обзор

{% data reusables.codespaces.prebuilds-definition %}

Если в настоящее время создание codespace для репозитория занимает более 2 минут, вы, скорее всего, выиграете от использования предварительных сборок. Это связано с тем, что в предварительной сборке любой исходный код, расширения редактора, зависимости проекта, команды и конфигурации уже были скачаны, установлены и применены перед созданием codespace. 

По умолчанию всякий раз при отправке изменения в репозиторий {% data variables.product.prodname_github_codespaces %} использует {% data variables.product.prodname_actions %} для автоматического обновления предварительных сборок.

Если для определенной ветви репозитория, файла конфигурации контейнера разработки и вашего региона доступны предварительные сборки, вы увидите метку "{% octicon "zap" aria-label="The zap icon" %} Доступна предварительная сборка" в списке типов компьютеров при создании codespace. Если предварительная сборка все еще создается, вы увидите метку "{% octicon "history" aria-label="The history icon" %} Предварительная сборка выполняется". Дополнительные сведения см. в разделе [Создание codespace для репозитория](/codespaces/developing-in-codespaces/creating-a-codespace-for-a-repository#creating-a-codespace-for-a-repository).

![Диалоговое окно выбора типа компьютера](/assets/images/help/codespaces/choose-custom-machine-type.png)

При создании codespace на основе шаблона на странице "Ваши codespaces" {% data variables.product.prodname_dotcom %} может автоматически использовать предварительную сборку для ускорения создания. Дополнительные сведения о шаблонах см. в разделе [Создание пространства кода из шаблона](/codespaces/developing-in-codespaces/creating-a-codespace-from-a-template).

## Процесс предварительной сборки

Чтобы создать предварительную сборку, необходимо настроить конфигурацию предварительной сборки. Когда вы сохраняете конфигурацию, запускается рабочий процесс {% data variables.product.prodname_actions %} для создания каждой из необходимых предварительных сборок, по одному рабочему процессу на предварительную сборку. Рабочие процессы также запускаются всякий раз, когда необходимо обновить предварительные сборки для вашей конфигурации. Это может происходить с запланированными интервалами, при отправке в репозиторий с поддержкой предварительной сборки или при изменении конфигурации контейнера разработки. Дополнительные сведения см. в разделе [Настройка предварительных сборок](/codespaces/prebuilding-your-codespaces/configuring-prebuilds#configuring-prebuilds).  

Когда запускается рабочий процесс предварительной сборки, {% data variables.product.prodname_dotcom %} создает временную среду codespace, выполняя операции настройки вплоть до любых команд `onCreateCommand` и `updateContentCommand` в файле `devcontainer.json` включительно. Во время создания предварительной сборки команды не `postCreateCommand` выполняются. Дополнительные сведения об этих командах [см. в справочнике по `devcontainer.json`](https://code.visualstudio.com/docs/remote/devcontainerjson-reference#_devcontainerjson-properties) в документации по {% data variables.product.prodname_vscode_shortname %}. Затем будет создан и сохранен моментальный снимок созданного контейнера.

Как и в случае с другими рабочими процессами {% data variables.product.prodname_actions %}, выполнение рабочего процесса настройки предварительной сборки будет потреблять часть {% data variables.product.prodname_actions %} минут, включенных в вашу учетную запись, если таковые имеются, или будет взиматься плата за {% data variables.product.prodname_actions %} минут. Плата за хранение предварительных сборок codespace взимается так же, как за хранение активных или остановленных кодовых пространств. Дополнительные сведения см. в статье [Сведения о выставлении счетов за {% data variables.product.prodname_github_codespaces %}](/billing/managing-billing-for-github-codespaces/about-billing-for-github-codespaces#billing-for-codespaces-prebuilds).

Когда вы создаете среду codespace из предварительной сборки, {% data variables.product.prodname_dotcom %} скачивает существующий снимок контейнера из хранилища и развертывает его на новой виртуальной машине, выполняя оставшиеся команды, указанные в конфигурации контейнера разработки. Так как многие операции уже выполнены, например клонирование репозитория, создание codespace из предварительной сборки может быть значительно быстрее, чем создание без предварительной сборки. Это так, когда репозиторий большой и (или) команды `onCreateCommand` выполняются долго.

## Сведения об отправке изменений в ветви с включенной предварительной сборкой

По умолчанию каждая отправка в ветвь с конфигурацией предварительной сборки приводит к запуску рабочего процесса {% data variables.product.prodname_dotcom %}, управляемого {% data variables.product.prodname_actions %}, для обновления предварительной сборки. Рабочий процесс предварительной сборки имеет ограничение параллелизма: запускается один рабочий процесс за раз для заданной конфигурации предварительной сборки, если только не были внесены изменения, влияющие на конфигурацию контейнера разработки для связанного репозитория. Дополнительные сведения см. в статье [Общие сведения о контейнерах разработки](/codespaces/setting-up-your-project-for-codespaces/introduction-to-dev-containers). Если выполнение уже выполняется, запуск рабочего процесса, который был помещен в очередь, будет выполняться следующим после завершения текущего выполнения. 

Если для предварительной сборки настроено обновление при каждой отправке, это означает, что в случае очень частых отправок в репозиторий обновления предварительной сборки будут происходить не реже, чем требуется для запуска рабочего процесса предварительной сборки. Итак, если выполнение рабочего процесса обычно занимает один час, предварительные сборки будут создаваться для репозитория примерно раз в час, если выполнение завершится успешно, или чаще, если были отправки, изменяющие конфигурацию контейнера разработки в ветви.

Например, давайте представим, что выполняется 5 последовательных отправок в ветвь с предварительной конфигурацией. В этой ситуации:

* Запуск рабочего процесса выполняется для первой принудительной отправки, чтобы обновить предварительную сборку.
* Если 4 оставшиеся отправки не влияют на конфигурацию контейнера разработки, выполнение рабочего процесса для них ставится в очередь в состоянии "ожидание". 
  
  Если какая-либо из оставшихся 4 отправок изменяет конфигурацию контейнера разработки, то служба не пропустит это и немедленно запустит рабочий процесс создания предварительной сборки, соответствующим образом обновив предварительную сборку в случае успеха. 

* После завершения первого запуска рабочие процессы для второй, третьей и четвертой отправок будут отменены, а последний поставленный в очередь рабочий процесс (для пятой отправки) будет запущен и обновит предварительную сборку. 
