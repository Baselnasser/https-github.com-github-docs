---
title: Ограничение базового образа для codespace
shortTitle: Restrict base image
intro: 'Вы можете указать, какие базовые образы можно использовать для новых codespace, созданных в вашей организации.'
permissions: 'To manage image constraints for an organization''s codespaces, you must be an owner of the organization.'
versions:
  fpt: '*'
  ghec: '*'
type: how_to
topics:
  - Codespaces
ms.openlocfilehash: f17bb20aa919ca94cd13e14a6f770cea23042b2b
ms.sourcegitcommit: 1f3bd126ca000982c538f1621d47722737740943
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2022
ms.locfileid: '148188283'
---
## Обзор

При создании codespace контейнер Docker автоматически создается на удаленной виртуальной машине. Контейнер Docker создается из образа Docker. Образ фактически является шаблоном для контейнеров Docker и определяет многие аспекты результирующей среды, предоставляемой codespace.

Вы можете выбрать образ, который вы хотите использовать для codespaces, указав его в конфигурации контейнера разработки для репозитория. Это можно сделать, например, с помощью `image` свойства в `devcontainer.json` файле .

```json{:copy}
"image": "mcr.microsoft.com/vscode/devcontainers/javascript-node:18",
```

Дополнительные сведения см. в [спецификации контейнеров разработки](https://containers.dev/implementors/json_reference/) на containers.dev.

Если вы не укажете образ в конфигурации контейнера разработки для репозитория, используется образ по умолчанию. Образ по умолчанию содержит несколько версий среды выполнения для популярных языков и часто используемых средств. Дополнительные сведения см. в статье [Общие сведения о контейнерах разработки](/codespaces/setting-up-your-project-for-codespaces/introduction-to-dev-containers#using-the-default-dev-container-configuration).

Как владелец организации вы можете добавить политику, чтобы ограничить, какие образы можно использовать для codespace, созданных в вашей организации.

Если образ, указанный в конфигурации контейнера разработки, не соответствует одному из разрешенных образов, при попытке создать codespace для репозитория отображается следующее сообщение:

> Не удалось создать Codespace. Базовый образ "DETAILS FROM DEV CONTAINER CONFIGURATION" не разрешен на основе политики организации, установленной администратором организации.

{% note %}

**Примечания** 
* Политика базового образа применяется только при создании codespace. В настоящее время он не применяется при перестроении контейнера. Это изменится в будущем выпуске. Дополнительные сведения см. в разделе [Жизненный цикл codespace](/codespaces/getting-started/the-codespace-lifecycle#rebuilding-a-codespace).
* Политика базового образа не применяется к образу по умолчанию или образу, который используется для восстановления пространства кода, если в конфигурации контейнера разработки возникает ошибка, которая препятствует перестроению контейнера. 

{% endnote %}

### Параметр политик для всей организации и для указанного репозитория

При создании политики вы выбираете, применяется ли она ко всем репозиториям в организации или только к указанным. Если вы задали политику для всей организации, все политики, заданные для отдельных репозиториев, должны относиться к набору ограничений на уровне организации. Добавление политик делает выбор образа более строгим, а не менее строгим.

Например, можно создать политику для всей организации, которая ограничивает базовый образ любым из десяти указанных образов. Затем можно задать политику для репозитория A, которая ограничивает образ только двумя образами, указанными на уровне организации. Указание дополнительных образов для репозитория A не будет иметь никакого эффекта, так как эти образы не указаны в политике уровня организации. При добавлении политики для всей организации следует задать для нее самый большой выбор образов, которые будут доступны для любого репозитория в вашей организации. Затем вы можете добавить политики для конкретного репозитория, чтобы дополнительно ограничить выбор.

{% data reusables.codespaces.codespaces-org-policies-note %}

## Добавление политики для определения разрешенных образов

{% data reusables.profile.access_org %} {% data reusables.profile.org_settings %} {% data reusables.codespaces.codespaces-org-policies %}
1. Щелкните **Добавить ограничение** и выберите **Базовые образы**.

   ![Снимок экрана: раскрывающееся меню "Добавить ограничение"](/assets/images/help/codespaces/add-constraint-dropdown-image.png)

1. Нажмите {% octicon "pencil" aria-label="The edit icon" %}, чтобы изменить ограничение.

   ![Снимок экрана: значок карандаша для изменения ограничения](/assets/images/help/codespaces/edit-image-constraint.png)

1. В поле "Допустимые значения" введите полный URL-адрес изображения, которое вы хотите разрешить.

   ![Снимок экрана: запись в поле "Разрешенные значения"](/assets/images/help/codespaces/image-allowed-values.png)
 
   {% note %}

   **Примечание**. Необходимо указать URL-адрес образа, который точно соответствует значению, указанному в конфигурации контейнера разработки.

   {% endnote %}

1. Нажмите кнопку "плюс" ({% octicon "plus" aria-label="The plus icon" %}), чтобы добавить значение.
1. При необходимости повторите предыдущие два шага, чтобы добавить ДОПОЛНИТЕЛЬНЫЕ URL-адреса изображений.
{% data reusables.codespaces.codespaces-policy-targets %}
1. Если вы хотите добавить другое ограничение в политику, щелкните **Добавить ограничение** и выберите другое ограничение. Дополнительные сведения о других ограничениях см. в разделе:
   * "[Ограничение доступа к типам компьютеров](/codespaces/managing-codespaces-for-your-organization/restricting-access-to-machine-types)"
   * ["Ограничение видимости перенаправленных портов](/codespaces/managing-codespaces-for-your-organization/restricting-the-visibility-of-forwarded-ports)"
   * [Ограничение времени ожидания простоя](/codespaces/managing-codespaces-for-your-organization/restricting-the-idle-timeout-period)
   * [Ограничение срока хранения для codespaces](/codespaces/managing-codespaces-for-your-organization/restricting-the-retention-period-for-codespaces)
1. Завершив добавление ограничений в политику, щелкните **Сохранить**.

Политика применяется, когда кто-либо пытается создать новое пространство кода, которое будет оплачиваться для вашей организации. Ограничение базового образа не влияет на существующие codespace, активные или остановленные.

## Изменение политики

Можно изменить существующую политику. Например, вы можете захотеть добавить или удалить ограничения политики.

1. Откройте страницу "Политики codespace". Дополнительные сведения см. в разделе [Добавление политики для определения разрешенных образов](#adding-a-policy-to-define-the-allowed-images).
1. Щелкните имя политики, которую нужно изменить.
1. Щелкните значок карандаша ({% octicon "pencil" aria-label="The edit icon" %}) рядом с ограничением "Базовые изображения".
1. Добавление и удаление URL-адресов изображений.
1. Выберите команду **Сохранить**.

## Удаление политики 

1. Откройте страницу "Политики codespace". Дополнительные сведения см. в разделе [Добавление политики для определения разрешенных образов](#adding-a-policy-to-define-the-allowed-images).
1. Нажмите кнопку "Удалить" справа от политики, которую вы хотите удалить.

   ![Снимок экрана: кнопка удаления для политики](/assets/images/help/codespaces/policy-delete.png)
