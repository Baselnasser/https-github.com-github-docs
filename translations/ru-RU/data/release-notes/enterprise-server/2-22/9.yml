date: '23.03.2021'
intro: "Из-за серьезной ошибки, затрагивающей множество пользователей, были отключены загрузки. Это будет устранено в следующем исправлении."
sections:
  security_fixes:
    - '**ВЫСОКИЙ.** В GitHub Enterprise Server выявлена уязвимость, связанная с удаленным выполнением кода, которую можно использовать при создании сайта GitHub Pages. Доступные пользователю параметры конфигурации, используемые GitHub Pages, не имели достаточных ограничений, позволяя переопределять переменные сред и выполнять код в экземпляре GitHub Enterprise Server. Чтобы эксплуатировать уязвимость, злоумышленнику требуется разрешение для создания и построения сайта GitHub Pages в экземпляре GitHub Enterprise Server. Эта уязвимость затрагивала все версии GitHub Enterprise Server до 3.0.3. Она устранена в версиях 3.0.3, 2.22.9 и 2.21.17. Уязвимость стала известной в рамках программы GitHub Bug Bounty и получила номер CVE-2021-22864.'
    - Пакеты обновлены до последних версий систем безопасности.
  bugs:
    - "Выполнение \"ghe-cluster-config-init\" могло вызвать неработоспособность кластера."
    - Служба Systemd могла перестать отслеживать идентификатор PID для HAProxy.
    - После успешной отработки отказа продолжало постоянно отображаться предупреждение mysql-failover.
    - "Выполнение \"ghe-cluster-config-init\" не полностью учитывало код завершения фоновых заданий, из-за чего неверно обрабатывались предварительные проверки."
    - "Ссылка на раздел \"Безопасность и анализ\" не отображается в меню навигации слева на странице \"Параметры\" для репозиториев."
    - После отключения GitHub Packages некоторые от некоторых страниц организации мог приходить HTTP-ответ с ошибкой 500.
  changes:
    - "Повышает надежность служб nomad путем реализации той же политики перезапуска, которая доступна в GitHub Enterprise Server 3.0."
    - "Используется относительное число \"bootstrap_expectUse\" для Consul и Nomad, что обеспечивает начальную загрузку кластера, даже когда многие узлы не работают."
    - "Ротация журналов будет выполняться не только по времени, но и по размеру."
    - "В команду \"ghe-cluster-status\" добавляется kafka-lite."
  known_issues:
    - "Злоумышленник мог создать первого пользователя с правами администратора на новом, только что настроенном сервере, не имеющем пользователей."
    - Пользовательские правила брандмауэра не сохраняются в процессе обновления.
    - "Отслеживаемые файлы Git LFS, [отправленные через веб-интерфейс](https://github.com/blog/2105-upload-files-to-your-repositories), ошибочно добавлялись напрямую в репозиторий."
    - "Проблемы нельзя закрыть, если они содержат постоянную ссылку на большой двоичный объект в том же репозитории, где путь файла содержит более 255 символов."
    - "Когда в GitHub Connect включен параметр \"Пользователи могут выполнять поиск на GitHub.com\", результаты поиска на GitHub.com не включают проблемы в частных и внутренних репозиториях."
    - |Ротация журналов может не сообщить службам о необходимости перехода на новые файлы журналов. Из-за этого продолжают использоваться старые и со временем исчерпывается место на корневом диске.

Для устранения и предотвращения этой проблемы выполните в [оболочке администрирования](https://docs.github.com/en/enterprise-server/admin/configuration/accessing-the-administrative-shell-ssh) (SSH) следующие команды или обратитесь за помощью в [Службу поддержки GitHub Enterprise](https://support.github.com/contact):



```

printf "PATH=/usr/local/sbin:/usr/local/bin:/usr/local/share/enterprise:/usr/sbin:/usr/bin:/sbin:/bin\n29,59 * * * * root /usr/sbin/logrotate /etc/logrotate.conf\n" | sudo sponge /etc/cron.d/logrotate

sudo /usr/sbin/logrotate -f /etc/logrotate.conf

```

|
    - 'Если узел реплики находится в автономном режиме в конфигурации высокой доступности, {% data variables.product.product_name %} по-прежнему может маршрутизировать запросы {% data variables.product.prodname_pages %} на узел в автономном режиме, снижая доступность {% data variables.product.prodname_pages %} для пользователей.'
