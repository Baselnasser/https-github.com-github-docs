date: '02.03.2021'
intro: "Повышены минимальные требования для инфраструктуры для версий {% data variables.product.prodname_ghe_server %} 3.0 и более поздних. Дополнительные сведения см. в разделе \"[Минимальные требования для GitHub Enterprise Server 3.0 и более поздних версий](/admin/enterprise-management/upgrading-github-enterprise-server#about-minimum-requirements-for-github-enterprise-server-30-and-later).\""
sections:
  security_fixes:
    - '**ВЫСОКИЙ.** Уязвимость, связанная с ненадлежащим контролем доступа, выявлена в GitHub Enterprise Server. Уязвимость позволяла не прошедшим проверку подлинности пользователям экземпляра получить доступ для записи в неавторизованные репозитории посредством специально созданных запросов на вытягивание и запросов REST API. Злоумышленнику требуется возможность создать вилку в целевом репозитории (этот параметр по умолчанию отключен для частных репозиториев, принадлежащих организации). Защита ветвей (например, обязательные проверки запросов на вытягивание или проверки статусов) предотвращают объединение несанкционированных фиксаций без дальнейшей проверки или валидации. Этой уязвимости присвоен код CVE-2021-22861. Об этой сообщено посредством [программы GitHub Bug Bounty Program](https://bounty.github.com).'
    - '**ВЫСОКИЙ.** Уязвимость, связанная с ненадлежащим контролем доступа, выявлена в API GraphQL GitHub Enterprise Server. Уязвимость позволяла не прошедшим проверку подлинности пользователям экземпляра без надлежащей авторизации изменять разрешение ответственного за обслуживание для совместной работы с запросом на вытягивания. Эксплуатируя эту уязвимость, злоумышленник может получить доступ к главным ветвям запросов на вытягивание, открытых в репозиториях, в отношении которых они являются ответственными за обслуживание. Создание вилок по умолчанию отключено для частных репозиториев, принадлежащих организации, чтобы предотвратить появление такой уязвимости. Кроме того, защита ветвей (например, обязательные проверки и запросов на вытягивание или проверки статусов) предотвращают объединение несанкционированных фиксаций без дальнейшей проверки или валидации. Этой уязвимости присвоен код CVE-2021-22863. Об этой сообщено посредством [программы GitHub Bug Bounty Program](https://bounty.github.com).'
    - '**ВЫСОКИЙ.** Уязвимость, связанная с ненадлежащим контролем доступа, выявлена в GitHub Enterprise Server. Уязвимость позволяла прошедшим проверку подлинности пользователям создать вилку в репозитории, чтобы раскрыть секреты Actions для родительского репозитория вилки. Эта уязвимость возникала из-за ошибки, которая позволяла обновлять базовую ссылку в запросе на вытягивание, чтобы эта ссылка указывала на произвольный SHA или на другой запрос на вытягивание за пределами репозитория вилки. Если установить эту некорректную ссылку в PR, то это позволяет обойти ограничения для секретов Actions, отправленных в рабочий процесс из вилок. Эта уязвимость затрагивает версии GitHub Enterprise Server 3.0.0, 3.0.0.rc2 и 3.0.0.rc1. Ей присвоен код CVE-2021-22862. Об этой уязвимости сообщается посредством программы GitHub Bug Bounty.'
    - '**СРЕДНИЙ.** Маркеры GitHub из сборок GitHub Pages могут быть добавлены в журналы.'
    - 'Пакеты обновлены до последних версий систем безопасности.'
  bugs:
    - 'Проверки работоспособности подсистемы балансировки нагрузки в отдельных случаях могут вызвать заполнение журналов babeId ошибками протокола PROXY.'
    - 'Заголовки HTTP не соответствуют стандартами HTTP RFC в некоторых запросах (например, статус 304 для архивов).'
    - 'В экземплярах, где размещены репозитории Python с включенной функцией графа зависимостей, экземпляр может перестать отвечать на запросы из-за заполнения корневого диска журналами ошибок.'
    - 'Информационное сообщение непреднамеренно внесено в журнал как ошибка в ходе создания моментальных снимков утилит резервного копирования GitHub Enterprise. Это привело к отправке ненужных сообщений при планировании резервных копий заданиями cron, которые прослушивают выходные данные на предмет обнаружения stderr.'
    - 'В VMWare ESX 6.7 исходная конфигурация может зависать в процессе создания ключей узла, из-за которых экземпляр оказался недоступен по SSH.'
    - 'Если GitHub Actions включен, отключение режима обслуживания в консоли управления завершается ошибкой.'
    - 'Параметр создания пакета отображается на странице параметров участника организации, хотя эта функция еще недоступна.'
    - 'При включении проверки секретов на странице "Безопасность и анализ" в диалоговом окне некорректно упоминаются частные репозитории.'
    - 'При редактировании вики-страницы пользователь может видеть ошибку 500 в момент нажатия на кнопку "Сохранить".'
    - 'Подписанная фиксация S/MIME, использующая сертификат с несколькими именами в альтернативном имени субъекта некорректно отображает статус "Не проверено" в индикаторе событий фиксации.'
    - 'Пользователь видит ошибку 500 при выполнении операций git в экземпляре, настроенном с использованием проверки подлинности LDAP.'
    - 'Пользователю, права которого приостановлены, отправляются сообщения электронной почты при добавлении в команду.'
    - 'Если в репозитории слишком большое число манифестов, отображается ошибка `Достигнуто максимальное число разрешенных файлов манифеста (20) для этого репозитория.` на вкладке "Аналитика" -> "Граф зависимостей". Дополнительные сведения см. в разделе [Ограничения по визуализации](https://docs.github.com/en/github/managing-security-vulnerabilities/troubleshooting-the-detection-of-vulnerable-dependencies#are-there-limits-which-affect-the-dependency-graph-data).'
    - 'Для пользователей исправлений отображается команда настройки действия по проверке кода CodeQL, даже если Actions не включен для их репозитория.'
    - 'Флажок "Запретить администраторам репозитория изменять анонимный доступ для чтения к Git", доступный в разделе параметров корпоративной учетной записи, не удается установить или снять.'
    - 'В модальном окне, используемом для отображения обязательного сообщения, отсутствует вертикальная полоса прокрутки, то есть, длинные сообщения нельзя просмотреть целиком.'
    - 'Иногда при запуске Redis возникает ошибка после жесткой перезагрузки или аварийного завершения работы приложения.'
    - 'Граф зависимостей не смог выполнить анализ файлов манифеста Python `setup.py`, что привело к появлению ошибок HTTP 500 в журналах. Все это, в сочетании с дублированием записей в журнале, приводит к повышенному потреблению ресурсов корневого каталога.'
  changes:
    - 'Параллельная обработка запросов в тех случаях, когда несколько пользователей одновременно загружают один и тот же архив, приводит к повышению производительности.'
  known_issues:
    - 'Злоумышленник мог создать первого пользователя с правами администратора на новом, только что настроенном сервере, не имеющем пользователей.'
    - 'Пользовательские правила брандмауэра не сохраняются в процессе обновления.'
    - 'Отслеживаемые файлы Git LFS, [отправленные через веб-интерфейс](https://github.com/blog/2105-upload-files-to-your-repositories), ошибочно добавлялись напрямую в репозиторий.'
    - 'Проблемы нельзя закрыть, если они содержат постоянную ссылку на большой двоичный объект в том же репозитории, где путь файла содержит более 255 символов.'
    - 'Когда в GitHub Connect включен параметр "Пользователи могут выполнять поиск на GitHub.com", результаты поиска на GitHub.com не включают проблемы в частных и внутренних репозиториях.'
    - 'Если включен режим обслуживания, некоторые службы по-прежнему включаются в список со статусом "Активные процессы". Ожидается, что такие выявленные службы будут запущены в режиме обслуживания. Если у вас возникла эта проблема и вы не знаете, что делать, обратитесь в [Службу поддержки GitHub Enterprise](https://support.github.com/contact).'
    - 'Дублирование записей в журнале `/var/log/messages`, `/var/log/syslog`, and `/var/log/user.log` приводит к потреблению повышенного объема корневого каталога.'
    - 'Пользователи могут удалить обязательное сообщение без установки всех флажков.'
    - '[Сценарии перехватчиков предварительного получения](/admin/policies/enforcing-policy-with-pre-receive-hooks) не могут записывать временные файлы, что может вызвать ошибки при выполнении сценариев. Пользователи, которые используют перехватчики предварительного получения, должны выполнить тестирование в промежуточной среде, чтобы проверить, требуется ли сценариям доступ для записи.'
    - '[Ключи развертывания] репозитория (/developers/overview/managing-deploy-keys) нельзя использовать с репозиториями, которые содержат объекты LFS.'
    - "В Jupyter Notebook, выполняющем отрисовку в пользовательском веб-интерфейсе, возникает ошибка, если Notebook включает символы, не являющиеся символами ASCII UTF-8."
    - 'В reStructuredText (RST), выполняющем отрисовку в пользовательском веб-интерфейсе, возникает ошибка, и вместо этого отображается текст с разметкой RST.'
    - 'Граф зависимостей не смог выполнить анализ файлов манифеста Javascript `yarn.lock`, что привело к появлению ошибок HTTP 500 в журналах.'
    - 'Экземпляры с пользовательским часовым поясом, которые обновлялись с более ранней версии GitHub Enterprise Server, могут содержать некорректные метки времени в пользовательском веб-интерфейсе.'
    - 'Старые сборки страниц Pages не очищаются, и из-за этого может произойти заполнение пользовательского диска (`/data/user/`).'
    - 'При удалении ветви после объединения запроса на вытягивание, отображается сообщение об ошибке, хотя удаление ветви выполнено успешно.'
    - |Пользователи могут столкнуться с тем, что такие активы как avatars не загружаются или возникает ошибка кода передачи/вытягивания. Это может быть вызвано несоответствием PID в службе `haproxy-cluster-proxy`. Чтобы определить, затронуты ли ваши экземпляры, выполните следующие действия:



**Один экземпляр**



1. Выполните этот код в [administrative shell](https://docs.github.com/en/enterprise-server/admin/configuration/accessing-the-administrative-shell-ssh) (SSH):



  ```

  if [ $(cat /var/run/haproxy-cluster-proxy.pid) -ne $(systemctl show --property MainPID --value haproxy-cluster-proxy) ]; then echo ''Main PID of haproxy-cluster-proxy does not match /var/run/haproxy-cluster-proxy.pid''; fi

  ```



2. Если показано, что существует несоответствие, перезагрузите экземпляр.



**Настройка кластера или высокого уровня доступности**



1. Выполните этот код в [administrative shell](https://docs.github.com/en/enterprise-server/admin/configuration/accessing-the-administrative-shell-ssh) (SSH):



  ```

  ghe-cluster-each -- ''if [ $(cat /var/run/haproxy-cluster-proxy.pid) -ne $(systemctl show --property MainPID --value haproxy-cluster-proxy) ]; then echo ''Main PID of haproxy-cluster-proxy does not match /var/run/haproxy-cluster-proxy.pid''; fi''

  ```



2. Если показано, что затрагивается один или несколько узлов, перезагрузите затронутые узлы.

|
    - 'Если узел реплики находится в автономном режиме в конфигурации высокой доступности, {% data variables.product.product_name %} по-прежнему может маршрутизировать запросы {% data variables.product.prodname_pages %} на узел в автономном режиме, снижая доступность {% data variables.product.prodname_pages %} для пользователей.'
    - "Ограничения ресурсов, относящиеся к обработке перехватчиков перед получением, могут приводить к сбою некоторых из них."
