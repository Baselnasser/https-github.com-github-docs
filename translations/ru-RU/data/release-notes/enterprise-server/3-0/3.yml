date: '2021-03-23'
intro: "Из-за серьезной ошибки, затрагивающей множество пользователей, были отключены загрузки. Это будет устранено в следующем исправлении."
sections:
  security_fixes:
    - '**Высокая важность.** Была выявлена уязвимость GitHub Enterprise Server, связанная с удаленным выполнением кода, которую можно было использовать при создании сайта GitHub Pages. Доступные пользователю параметры конфигурации, используемые GitHub Pages, не имели достаточных ограничений, позволяя переопределять переменные сред и выполнять код в экземпляре GitHub Enterprise Server. Чтобы воспользоваться уязвимостью, злоумышленнику необходимо было разрешение для создания и сборки сайта GitHub Pages в экземпляре GitHub Enterprise Server. Эта уязвимость затрагивала все версии GitHub Enterprise Server до 3.0.3. Она устранена в версиях 3.0.3, 2.22.9 и 2.21.17. Уязвимость стала известной в рамках программы GitHub Bug Bounty и получила номер CVE-2021-22864.'
    - Пакеты обновлены до последних версий систем безопасности.
  bugs:
    - "Выполнение \"ghe-cluster-config-init\" могло вызвать неработоспособность кластера."
    - "Графический пользовательский интерфейс не позволял разрешать конфликты слияния, когда в репозитории настроены перехватчики перед получением."
    - '"launch-deployer" и "launch-receiver" вели журналы на уровне отладки (DEBUG) и заполняли их ненужными сведениями.'
    - Служба Systemd могла перестать отслеживать идентификатор PID для HAProxy.
    - При настройке GitHub Actions на использование хранилища S3 иногда не загружались журналы для действия.
    - После успешной отработки отказа продолжало постоянно отображаться предупреждение mysql-failover.
    - "Выполнение \"ghe-cluster-config-init\" не полностью учитывало код завершения фоновых заданий, из-за чего неверно обрабатывались предварительные проверки."
    - При включении GitHub Actions возможен был сбой инициализации без уведомления.
    - При включении уведомлений об уязвимостях не выполнялось обновление до серии 3.0.
    - "Задания, связанные с Codespaces, ставились в очередь, из-за чего накапливались необработанные задания."
  changes:
    - "Используется относительное число \"bootstrap_expectUse\" для Consul и Nomad, что обеспечивает начальную загрузку кластера, даже когда многие узлы не работают."
    - "Ротация журналов будет выполняться не только по времени, но и по размеру."
    - "В команду \"ghe-cluster-status\" добавляется kafka-lite."
  known_issues:
    - "Злоумышленник мог создать первого пользователя с правами администратора на новом, только что настроенном сервере GitHub Enterprise Server, не имеющем пользователей."
    - Пользовательские правила брандмауэра не сохраняются в процессе обновления.
    - "Отслеживаемые файлы Git LFS, [отправленные через веб-интерфейс](https://github.com/blog/2105-upload-files-to-your-repositories), ошибочно добавлялись напрямую в репозиторий."
    - "Невозможно закрывать проблемы, если они содержат постоянную ссылку на BLOB-объект в том же репозитории с путем, длина которого превышает 255 символов."
    - "Когда в GitHub Connect включен параметр \"Пользователи могут выполнять поиск на GitHub.com\", результаты поиска на GitHub.com не включают проблемы в частных и внутренних репозиториях."
    - "Если включен режим обслуживания, некоторые службы по-прежнему включаются в список со статусом \"Активные процессы\". Ожидается, что такие выявленные службы будут запущены в режиме обслуживания. Если у вас возникла эта проблема и вы не знаете, что делать, обратитесь в [Службу поддержки GitHub Enterprise](https://support.github.com/contact)."
    - "Возможен сбой отрисовки записной книжки Jupyter Notebook в веб-интерфейсе, если она содержит символы UTF-8, не относящиеся к ASCII."
    - Возможен сбой отрисовки reStructuredText (RST) в веб-интерфейсе с отображением вместо нее необработанной разметки RST.
    - "Старые сборки Pages не удаляются и могут заполнить пользовательский диск (\"/data/user/\")."
    - "При удалении ветви после объединения запроса на вытягивание отображается сообщение об ошибке, хотя удаление ветви выполнено."
    - |Ротация журналов может не сообщить службам о необходимости перехода на новые файлы журналов. Из-за этого продолжают использоваться старые и со временем исчерпывается место на корневом диске.

Для устранения и предотвращения этой проблемы выполните в [оболочке администрирования](https://docs.github.com/en/enterprise-server/admin/configuration/accessing-the-administrative-shell-ssh) (SSH) следующие команды или обратитесь за помощью в [Службу поддержки GitHub Enterprise](https://support.github.com/):



```

printf "PATH=/usr/local/sbin:/usr/local/bin:/usr/local/share/enterprise:/usr/sbin:/usr/bin:/sbin:/bin\n29,59 * * * * root /usr/sbin/logrotate /etc/logrotate.conf\n" | sudo sponge /etc/cron.d/logrotate

sudo /usr/sbin/logrotate -f /etc/logrotate.conf

```

|
    - "Когда узел реплики в конфигурации с высокой доступностью отключен, {% data variables.product.product_name %} все равно может маршрутизировать на него запросы {% data variables.product.prodname_pages %}, уменьшая доступность {% data variables.product.prodname_pages %} для пользователей."
    - "Ограничения ресурсов, относящиеся к обработке перехватчиков перед получением, могут приводить к сбою некоторых из них."
