date: '16.02.2021'
intro: "Повышены минимальные требования для инфраструктуры для версий {% data variables.product.prodname_ghe_server %} 3.0 и более поздних. Дополнительные сведения см. в разделе \"[Минимальные требования для GitHub Enterprise Server 3.0 и более поздних версий](/admin/enterprise-management/upgrading-github-enterprise-server#about-minimum-requirements-for-github-enterprise-server-30-and-later).\""
sections:
  security_fixes:
    - '**ВЫСОКИЙ:** Выявлена уязвимость при удаленном исполнении кода в {% data variables.product.prodname_ghe_server %}, которую злоумышленники могут эксплуатировать при построении сайта {% data variables.product.prodname_pages %}. Управляемая пользователем базовых средств синтаксического анализа, используемых {% data variables.product.prodname_pages %}, не имела достаточных ограничений и позволяла выполнять команды в экземпляре {% data variables.product.prodname_ghe_server %}. Чтобы злоумышленник смог эксплуатировать эту уязвимость, ему потребуется разрешение для создания и построения сайта {% data variables.product.prodname_pages %} в экземпляре {% data variables.product.prodname_ghe_server %}. Этой уязвимости назначена CVE-2020-10519, и о ней сообщено посредством [программы GitHub Bug Bounty Program](https://bounty.github.com).'
  features:
    - heading: Действия GitHub
      notes:
        - |Выпущена общедоступная версия [GitHub Actions](https://github.com/features/actions) для {% data variables.product.product_name %} 3.0 и более поздних версий. Создавайте, тестируйте и развертывайте свой код в {% data variables.product.prodname_dotcom %}. Отправляйте операции проверки кода, управления ветвями и рассмотрения проблем любым удобным вам способом.



В этот выпуск включено несколько улучшений по сравнению с бета-версией {% data variables.product.prodname_actions %} в {% data variables.product.prodname_ghe_server %}:



- Администраторы предприятия, организации и репозитория могут создавать политики безопасности для доступа к {% data variables.product.prodname_actions %} в {% data variables.product.prodname_dotcom_the_website %}.

- Администраторы предприятия, организации и репозитория могут разрешать использование средства выполнения тестов локального размещения для общедоступных репозиториев.

- Администраторы предприятия, организации и репозитория теперь могут разрешать [запуск рабочих процессов в запросах на вытягивание, созданных на основе вилок частных репозиториев](/enterprise-server@3.0/github/setting-up-and-managing-organizations-and-teams/disabling-or-limiting-github-actions-for-your-organization#enabling-workflows-for-private-repository-forks).

- Событие `workflow_run` [теперь поддерживается](/enterprise-server@3.0/actions/reference/events-that-trigger-workflows#workflow_run)

- У пользователей теперь есть возможность [отключать рабочие процессы и включать их в более позднюю дату](/enterprise-server@3.0/actions/managing-workflow-runs/disabling-and-enabling-a-workflow).

- Журналы рабочих процессов были расширены, чтобы обеспечить [улучшенное взаимодействие с пользователями](/enterprise-server@3.0/actions/managing-workflow-runs/using-workflow-run-logs).

- Теперь пользователи могут использовать частные образы в заданиях контейнера и службах.

- Максимальный срок хранения (дн.) для [артефактов и журналов теперь можно настроить](/enterprise-server@3.0/github/setting-up-and-managing-your-enterprise/configuring-the-retention-period-for-github-actions-artifacts-and-logs-in-your-enterprise-account).

- API группа средств выполнения тестов теперь включает [метки](/enterprise-server@3.0/actions/hosting-your-own-runners/using-labels-with-self-hosted-runners).

- Теперь можно создать многократно используемые действия, используя сценарии оболочки с этапами выполнения операции создания.

- [Зашифрованные секреты для организации](/enterprise-server@3.0/actions/reference/encrypted-secrets#creating-encrypted-secrets-for-an-organization) allows you to consolidate secrets across repositories.

- [Шаблоны рабочих процессов для организации](/enterprise-server@3.0/actions/learn-github-actions/sharing-workflows-with-your-organization) оптимизируют и принудительно применяют рекомендации по обеспечению согласованности в пределах организации.



{% data variables.product.prodname_actions %} в настоящее время не поддерживается для предприятий, использующих конфигурации кластеров.

|
    - heading: GitHub Packages
      notes:
        - |[{% data variables.product.prodname_registry %}](https://github.com/features/packages) представляет собой службу размещения пакетов, встроенную в API GitHub, Actions и веб-перехватчики. Создайте [сквозной рабочий процесс DevOps](/enterprise/3.0/admin/packages/configuring-packages-support-for-your-enterprise), который будет включать ваш код, непрерывную интеграцию и решения для развертывания.



Поддерживаемые серверные части хранилища включают AWS S3 и MinIO (поддержка BLOB-объектов Azure будет добавлена в будущем). Обратите внимание, что текущая поддержка Docker в следующем выпуске будет заменена бета-версией нового реестра контейнеров GitHub. Ознакомьтесь с [обновленными минимальными требованиями для своей платформы](/enterprise/3.0/admin/installation/setting-up-a-github-enterprise-server-instance) перед включением {% data variables.product.prodname_registry %}.



При публикации пакетов в NuGet пользователи теперь могут использовать параметр `--api-key` для передачи маркера проверки подлинности вместо его записи в файл. Дополнительные сведения см. в разделе [Настройка dotnet CLI для использования с GitHub Packages](/enterprise-server@3.0/packages/guides/configuring-dotnet-cli-for-use-with-github-packages#publishing-a-package)



{% data variables.product.prodname_registry %} в настоящее время не поддерживается для предприятий, использующих конфигурации кластеров.

|
    - heading: GitHub Mobile (бета-версия)
      notes:
        - |[{% data variables.product.prodname_mobile %}](https://github.com/features/) (бета-версия) позволяет рассматривать уведомления и управлять проблемами и запросами на вытягивание с устройства. Вы можете одновременно войти в мобильное приложение с одной учетной записью пользователя на {% data variables.product.prodname_dotcom_the_website %} и с другой учетной записью пользователя на {% data variables.product.prodname_ghe_server %}.



{% data variables.product.prodname_mobile %} (бета-версия) теперь доступен для {% data variables.product.prodname_ghe_server %}. Выполните вход, используя наши приложения для [Android](https://play.google.com/store/apps/details?id=com.github.android) и [iOS](https://apps.apple.com/app/github/id1477376905), чтобы рассмотреть уведомления и управлять проблемами и запросами на вытягивание из любого места и в любое время. Администраторы могут отключить поддержку мобильных устройств для своего экземпляра Enterprise, используя для этого консоль управления или выполнив команду `ghe-config app.mobile.enabled false`.

|
    - heading: Advanced Security Secret Scanning (бета-версия)
      notes:
        - |[Проверка секретов (бета-версия)](https://github.com/features/security) выполняет проверку общедоступных и частных репозиториев для зафиксированных учетных данных, находит секреты и уведомляет поставщика секретов или администратора в момент фиксации репозитория.



Администраторы, использующие {% data variables.product.prodname_GH_advanced_security %} могут [включить и настроить] проверку секретов (/enterprise-server@3.0/admin/configuration/configuring-secret-scanning-for-your-appliance) {% data variables.product.prodname_GH_advanced_security %}. Ознакомьтесь с [обновленными минимальными требованиями для своей платформы](/enterprise/3.0/admin/installation/setting-up-a-github-enterprise-server-instance) перед включением {% data variables.product.prodname__GH_advanced_security %}.

|
    - heading: Advanced Security Code Scanning
      notes:
        - |[GitHub Advanced Security Code Scanning](https://github.com/features/security) теперь является общедоступным компонентом в GitHub Enterprise Server. Организации, которые приобрели Advanced Security, могут использовать эту функцию для тестирования безопасности статического анализа с применением своего кода, а также предотвращать появление уязвимостей в коде рабочей среды, используя нашу систему семантического анализа CodeQL. Дополнительные сведения см. в разделе "[Настройка проверки кода на своем устройстве](/en/enterprise-server@3.0/admin/configuration/configuring-code-scanning-for-your-appliance#running-code-scanning-using-github-actions)"

|
  changes:
    - heading: Изменения администрирования
      notes:
        - "Архитектура системы доставки событий веб-перехватчика была изменена, чтобы повысить пропускную способность, ускоренную доставку и сокращение числа отложенных сообщений. Кроме того, при этом потребляется меньший объем ЦП и памяти в версии {% data variables.product.prodname_ghe_server %} 3.0 и более поздних."
        - "Владельцы организации и предприятия теперь могут видеть, когда уровень участника команды повышается или понижается от ответственного за обслуживание в журнале аудита с помощью новых событий журнала аудита `team.promote_maintainer` и `team.demote_maintainer`. Дополнительные сведения см. в разделе \"[Аудируемые действия](/enterprise-server@3.0/admin/user-management/audited-actions).\""
        - "Ответственные за обслуживание репозитория с существующими сайтами {% data variables.product.prodname_pages %} могут [легко обновить предыдущее имя ветви по умолчанию](/enterprise-server@3.0/github/working-with-github-pages/about-github-pages#publishing-sources-for-github-pages-sites)."
        - "Для запуска {% data variables.product.prodname_ghe_server %} с включенным модулем Actions, Packages или Advanced Security потребуются дополнительные аппаратные ресурсы. Дополнительные сведения о минимальном объеме требуемых ресурсов для каждой поддерживаемой платформы см. в разделе \"[Настройка экземпляра {% data variables.product.prodname_ghe_server %}](/enterprise-server@3.0/admin/installation/setting-up-a-github-enterprise-server-instance).\""
        - "Администраторы теперь могут [опубликовать сообщение](/enterprise-server@3.0/admin/user-management/customizing-user-messages-for-your-enterprise), которое должны принять все пользователи. Это позволяет подключить новых пользователей, добавлять другие сведения об организации и политики."

    - heading: Изменения системы безопасности
      notes:
        - "Владельцы организации могут теперь отключить публикацию сайтов {% data variables.product.prodname_pages %} из репозиториев в организации. Отключение {% data variables.product.prodname_pages %} для организации не позволяет участникам создавать новые сайты для страниц, но не отменяет публикацию существующих сайтов. Дополнительные сведения см. в разделе \"[Отключение публикации сайтов {% data variables.product.prodname_pages %} для вашей организации](/enterprise-server@3.0/github/setting-up-and-managing-organizations-and-teams/disabling-publication-of-github-pages-sites-for-your-organization).\""
        - "Центр обработки данных необходимо явным образом определить на всех узлах до того, как включить активную реплику."
        - "Использование отпечатков SSH изменено на использование отпечатков SHA256, поскольку они используются с OpenSSH, начиная с версии 6.8. Это применимо к веб-интерфейсу, а также к API, где возвращаются отпечатки, например, GraphQL. Отпечатки представлены в формате OpenSSH."
        - В веб-перехватчик отправляются заголовки подписи SHA-1 и SHA-256 (два заголовка).

    - heading: Изменения разработчика
      notes:
        - "Большинство служб, запущенных в {% data variables.product.prodname_ghe_server %} 3.0 и более поздних версий, теперь находятся в контейнерах, и это позволяет внутренне включить GitHub для быстрой итеративной обработки и доставки выпусков с исправленными ошибками."
        - "Архитектура системы доставки событий веб-перехватчика была изменена, чтобы повысить пропускную способность, ускоренную доставку и сокращение числа отложенных сообщений."

    - heading: Изменения API
      notes:
        - "Администраторы могут теперь настроить баннер объявления на уровне сайта и управлять им с помощью REST API. Дополнительные сведения см. в разделе \"[Администрирование GitHub Enterprise](/enterprise-server@3.0/rest/reference/enterprise-admin#annoucements).\""
        - "Новая конечная точка API позволяет заменить пользователя на маркер сервера для пользователя и маркер сервера с областью, настроенной для конкретных репозиториев. Дополнительные сведения см. в разделе \"[Приложения](/enterprise-server@3.0/rest/reference/apps#create-a-scoped-access-token)\" в документации по REST API {% data variables.product.prodname_dotcom %}."

    - heading: Переименование ветви по умолчанию
      notes:
        - |Администраторы предприятия и организации теперь могут настроить имя ветви по умолчанию для новых репозиториев. Администраторы предприятия могут также принудительно применить выбранное имя ветви по умолчанию для всех организации или разрешить отдельным организациям выбрать свое имя.



Существующие репозитории не затрагиваются этими параметрами, и имя ветви по умолчанию не изменяется.



{% note %}



Ветвь по умолчанию для вновь созданных репозиториев будет задано значение `main` в GHES 3.1, если вы не настроили отказ путем задания параметра ветви по умолчанию на уровне предприятия.



{% endnote %}



Это изменение — одно из многих, которые вносятся GitHub в целях поддержки проектов и ответственных за обслуживание, которым требуется переименовать свои ветви по умолчанию. Дополнительные сведения об изменениях, которые мы вносим, см. в разделе [github/renaming](https://github.com/github/renaming).

|
  bugs:
    - heading: Исправления для известных проблем в релиз-кандидатах
      notes:
        - "Все известные проблемы в релиз-кандидате 1 и релиз-кандидате 2 были устранены за исключением тех, которые включены в список в разделе \"Известные проблемы\" ниже."
    - heading: Исправления для других проблем
      notes:
        - Проблемы с миграцией и обновлениями до версии 3.0.0 были устранены.
        - Управление версиями утилит резервного копирования теперь доступно для версий релиз-кандидата.
        - Создание пакета поддержки привело к возникновению ошибки в журналах оркестратора.
        - Большой объем операций восстановления может привести к истощению ресурсов памяти Redis.
        - Флажок включения GitHub Actions в консоли управления теперь можно просмотреть с помощью любого метода проверки подлинности.
        - "GitHub Actions можно включить, если требуемое хранилище также было настроено."
        - 'В `ghe-repl-status` может возникнуть ошибка, если репликация MSSQL не настроена.'
        - "Формат нескольких файлов журнала изменился, в том числе добавлен PID для различных типов журнала. Это не влияет на то, как служба поддержки GitHub Enterprise использует пакеты поддержки для устранения неполадок."
        - Запрос PATCH к API конфигурации веб-перехватчика больше не уничтожает секрет веб-перехватчика.
        - В отдельных типах перехватчиков предварительного получения происходят ошибки.
        - 'Служба пакетов NuGet теперь нормализует семантические версии при публикации. Недопустимая семантическая версия (например, v1.0.0.0.0.0) не подлежит загрузке клиентов NeGet и, таким образом, служба NuGet предположительно нормализует эти версии (например, v1.0.0.0.0.0 --> v1.0.0). Все исходные ненормализованные версии будут доступны в поле `verbatimVersion`. Изменения в конфигурациях клиента не требуются.'

  known_issues:
    - "Злоумышленник мог создать первого пользователя с правами администратора на новом, только что настроенном сервере {% data variables.product.prodname_ghe_server %}, не имеющем пользователей."
    - Пользовательские правила брандмауэра не сохраняются в процессе обновления.
    - "Отслеживаемые файлы Git LFS, [отправленные через веб-интерфейс](https://github.blog/2016-02-18-upload-files-to-your-repositories/), ошибочно добавлялись напрямую в репозиторий."
    - "Когда в GitHub Connect включен параметр \"Пользователи могут выполнять поиск на GitHub.com\", результаты поиска на GitHub.com не включают проблемы в частных и внутренних репозиториях."
    - "Если включен режим обслуживания, некоторые службы по-прежнему включаются в список со статусом \"Активные процессы\". Ожидается, что такие выявленные службы будут запущены в режиме обслуживания. Если у вас возникла такая проблема и вы не знаете, что делать, обратитесь {% data variables.contact.contact_ent_support %}."
    - "Если GitHub Actions включены, используйте `ghe-maintenance -u` для отмены режима обслуживания."
    - 'Дублирование записей в журнале `/var/log/messages`, `/var/log/syslog`, and `/var/log/user.log` приводит к потреблению повышенного объема корневого каталога.'
    - Пользователи могут удалить обязательное сообщение без установки всех флажков.
    - '[Сценарии перехватчиков предварительного получения](/admin/policies/enforcing-policy-with-pre-receive-hooks) не могут записывать временные файлы, что может вызвать ошибки при выполнении сценариев. Пользователи, которые используют перехватчики предварительного получения, должны выполнить тестирование в промежуточной среде, чтобы проверить, требуется ли сценариям доступ для записи.'
    - "[Ключи развертывания] репозитория (/developers/overview/managing-deploy-keys) нельзя использовать с репозиториями, которые содержат объекты LFS."
    - "В Jupyter Notebook, выполняющем отрисовку в пользовательском веб-интерфейсе, возникает ошибка, если Notebook включает символы, не являющиеся символами ASCII UTF-8."
    - "В reStructuredText (RST), выполняющем отрисовку в пользовательском веб-интерфейсе, возникает ошибка, и вместо этого отображается текст с разметкой RST."
    - "Граф зависимостей не смог выполнить анализ файлов манифеста Python `setup.py`, что привело к появлению ошибок HTTP 500 в журналах. Все это, в сочетании с дублированием записей в журнале, приводит к повышенному потреблению ресурсов корневого каталога."
    - Состояние гонки может вызвать ошибку в миграциях базы данных графа зависимостей.
    - "Экземпляры с пользовательским часовым поясом, которые обновлялись с более ранней версии GitHub Enterprise Server, могут содержать некорректные метки времени в пользовательском веб-интерфейсе."
    - "Старые сборки страниц Pages не очищаются, и из-за этого может произойти заполнение пользовательского диска (`/data/user/`)."
    - "При удалении ветви после объединения запроса на вытягивание, отображается сообщение об ошибке, хотя удаление ветви выполнено успешно."
    - "Если узел реплики находится в автономном режиме в конфигурации высокой доступности, {% data variables.product.product_name %} по-прежнему может маршрутизировать запросы {% data variables.product.prodname_pages %} на узел в автономном режиме, снижая доступность {% data variables.product.prodname_pages %} для пользователей."
    - "Ограничения ресурсов, относящиеся к обработке перехватчиков перед получением, могут приводить к сбою некоторых из них."

  deprecations:
    - heading: Прекращение поддержки GitHub Enterprise Server 2.19
      notes:
        - '**Поддержка {% data variables.product.prodname_ghe_server %} 2.19 прекращается с 12 ноября 2020 г.**. Это значит, что после этой даты исправления не будут выпускаться даже при критических проблемах безопасности. Чтобы улучшить производительность, безопасность и получить новые возможности, как можно быстрее [выполните обновлении до самой последней версии {% data variables.product.prodname_ghe_server %}](https://help.github.com/enterprise/admin/guides/installation/upgrading-github-enterprise/).'
    - heading: Прекращение поддержки устаревших событий веб-перехватчика приложения GitHub
      notes:
        - "Начиная с {% data variables.product.prodname_ghe_server %} 2.21.0, поддержка двух устаревших событий веб-перехватчика, относящихся к GitHub Apps, прекращена, и они будут удалены в {% data variables.product.prodname_ghe_server %} 3.2.0. Устаревшие события `integration_installation` и `integration_installation_repositories` содержат эквивалентные события, которые будут поддерживаться. Дополнительные сведения доступны в [публикации блога с объявлением о прекращении поддержки](https://developer.github.com/changes/2020-04-15-replacing-the-installation-and-installation-repositories-events/)."
    - heading: Прекращение поддержки конечных точек GitHub Apps
      notes:
        - "Начиная с {% data variables.product.prodname_ghe_server %} 2.21.0, устаревшая конечная точка GitHub Apps для создания маркеров доступа для установки больше не поддерживается и будут удалены в {% data variables.product.prodname_ghe_server %} 3.2.0.  Дополнительные сведения доступны в [публикации блога с объявлением о прекращении поддержки](https://developer.github.com/changes/2020-04-15-replacing-create-installation-access-token-endpoint/)."
    - heading: Прекращение поддержки API приложения OAuth
      notes:
        - "GitHub больше не поддерживают конечные точки приложения OAuth, которые содержат в качестве параметра пути параметр `access_token`. Мы представляем новые конечные точки, которые позволяют безопасно управлять маркерами для OAuth Apps путем перемещения `access_token` в текстовую область запроса. Хотя поддержка прекращения, конечные точки по-прежнему доступы в этой версии. Мы планируем удалить эти конечные точки в версии {% data variables.product.prodname_ghe_server %} 3.4. Подробнее см. в [записи блога с объявлением о прекращении поддержки](https://developer.github.com/changes/2020-02-14-deprecating-oauth-app-endpoint/)."
    - heading: Прекращение поддержки Semiotic
      notes:
        - "Служба поддерживала интерфейс \"Поиск по символу\" в представлении запроса на вытягивания, который редко использовался."
    - heading: Прекращение поддержки команд рабочего процесса
      notes:
        - 'Поддержка команд {% data variables.product.prodname_actions %} `set-env` и `add-path` рабочего процесса прекращена. Дополнительные сведения см. в разделе [changelog](https://github.blog/changelog/2020-10-01-github-actions-deprecating-set-env-and-add-path-commands/).'

  backups:
    - 'Для {% data variables.product.prodname_ghe_server %} 3.0 требуется по крайней мере [техническое оборудование для резервного копирования GitHub Enterprise версии 3.0.0](https://github.com/github/backup-utils) для [резервного копирования и аварийного восстановления](/enterprise-server@3.0/admin/configuration/configuring-backups-on-your-appliance).'
