date: '16.03.2021 г.'
intro: "Повышены минимальные требования к инфраструктуре для версий {% data variables.product.prodname_ghe_server %} 3.0 и более поздних. Дополнительные сведения см. на странице, посвященной [минимальным требованиям для GitHub Enterprise Server 3.0 и более поздних версий](/admin/enterprise-management/upgrading-github-enterprise-server#about-minimum-requirements-for-github-enterprise-server-30-and-later).\""
sections:
  security_fixes:
    - В пакетах обновлены системы безопасности до последних версий.
  bugs:
    - "Во время резервного копирования при попытке очистить очищаемые объекты хранилища возникала ошибка \"Warning&#58; One or more storage objects were not found on the source appliance.\" (Предупреждение&#58; На исходном устройстве не найден один или больше объектов хранилища.)."
    - "Графу зависимостей не удавалось анализировать файлы манифеста JavaScript \"yarn.lock\", что приводило к возникновению ошибок HTTP 500 в журналах."
    - Иногда могли происходить сбои отключения GitHub Actions.
    - "Настраиваемым обработчикам, запускающимся перед получением, не разрешалось записывать данные в папку \"/tmp\", из-за чего некоторые скрипты выполнялись неправильно."
    - Записи журналов Systemd дублировались в нескольких расположениях.
    - "Часовой пояс GitHub Enterprise 11.10 и более ранних версий сбрасывался до времени UTC после обновления версии до 3.0, про приводило к сдвигу данных временных меток на некоторых экземплярах."
    - "После нажатия команды \"Publish your first package\" (Опубликовать первый пакет) на боковой панели пакетов в репозитории страница оказывалась пустой."
    - Администратор сайта мог получать страницу с ошибкой 500 при попытке просмотреть данные о проблемах из частных репозиториев.
    - После отключения GitHub Packages с некоторых страниц организации мог приходить HTTP-ответ с кодом ошибки 500.
    - "При импорте из GitHub Enterprise Server архивов репозиториев, в которых отсутствовали файлы репозитория, мог происходить сбой с ошибкой."
    - "С репозиториями, содержащими объекты LFS, не удавалось использовать [ключи развертывания](/developers/overview/managing-deploy-keys) репозиториев."
    - "На боковой панели пакетов репозитория значок Docker отображался серым и появлялась подсказка \"This service is deprecated\" (Эта служба устарела)."
    - "Веб-перехватчики с настроенным типом содержимого \"application/x-www-form-urlencoded\" не получали параметры запросов в тексте POST-запросов."
    - Пользователи могли закрывать обязательные сообщения без установки всех флажков.
    - В некоторых случаях после обновления экземпляров версии 2.22 и более поздних отсутствовали ресурсы веб-интерфейса и страница отображалась неправильно.
    - "При выполнении \"ghe-config-apply\" могло истекать время ожидания с сообщением \"Failure waiting for nomad jobs to apply\" (Сбой ожидания применения заданий Nomad) из-за ошибки \"«job» stanza not found\" (строфа \"job\" не найдена)."
  known_issues:
    - "Злоумышленник мог создать первого пользователя с правами администратора на новом, только что настроенном сервере GitHub Enterprise Server без пользователей."
    - Настраиваемые правила брандмауэра не сохраняются в процессе обновления.
    - "Отслеживаемые файлы Git LFS, [отправленные через веб-интерфейс](https://github.com/blog/2105-upload-files-to-your-repositories), ошибочно добавлялись напрямую в репозиторий."
    - "Проблемы невозможно закрывать, если они содержат постоянную ссылку на BLOB-объект в том же репозитории с файловым путем, длина которого превышает 255 символов."
    - "Когда в GitHub Connect включен параметр \"Users can search GitHub.com\" (Пользователи могут выполнять поиск на GitHub.com), результаты поиска на GitHub.com не включают в себя проблемы в частных и внутренних репозиториях."
    - "Если включен режим обслуживания, некоторые службы по-прежнему включаются в список со статусом \"active processes\" (активные процессы). Ожидается, что такие выявленные службы будут запущены в режиме обслуживания. Если у вас возникла эта проблема и уверены в том, как ее решить, обратитесь в [службу поддержки GitHub Enterprise](https://support.github.com/contact)."
    - "В Jupyter Notebook, выполняющем отрисовку в пользовательском веб-интерфейсе, может происходить сбой, если в Notebook включены символы, не являющиеся символами ASCII UTF-8."
    - "При отрисовке reStructuredText (RST) в пользовательском веб-интерфейсе может возникать ошибка, и вместо него может отображаться текст RST с разметкой."
    - "Старые сборки Pages не очищаются, из-за этого может заполняться пользовательский диск (\"/data/user/\")."
    - "При удалении ветви после слияния запроса на вытягивание отображается сообщение об ошибке, хотя удаление ветви выполнено успешно."
    - |Пользователи могут столкнуться с тем, что такие ресурсы, как аватары не загружаются или возникает ошибка кода отправки — вытягивания. Это может быть вызвано несоответствием PID в службе "haproxy-cluster-proxy". Чтобы определить, затронуты ли ваши экземпляры, выполните следующие действия:



**Один экземпляр**



1. Выполните этот код в [административной оболочке](https://docs.github.com/en/enterprise-server/admin/configuration/accessing-the-administrative-shell-ssh) (SSH):



  ```

  if [ $(cat /var/run/haproxy-cluster-proxy.pid) -ne $(systemctl show --property MainPID --value haproxy-cluster-proxy) ]; then echo ''Main PID of haproxy-cluster-proxy does not match /var/run/haproxy-cluster-proxy.pid''; fi

  ```



2. Если показано, что есть несоответствие, перезагрузите экземпляр.



**Конфигурация кластера или высокой доступности**



1. Выполните этот код в [административной оболочке](https://docs.github.com/en/enterprise-server/admin/configuration/accessing-the-administrative-shell-ssh) (SSH):



  ```

  ghe-cluster-each -- ''if [ $(cat /var/run/haproxy-cluster-proxy.pid) -ne $(systemctl show --property MainPID --value haproxy-cluster-proxy) ]; then echo ''Main PID of haproxy-cluster-proxy does not match /var/run/haproxy-cluster-proxy.pid''; fi''

  ```



2. Если показано, что затрагивается один или несколько узлов, перезагрузите такие узлы.

|
    - "Если узел реплики пребывает в автономном состоянии в конфигурации высокой доступности, {% data variables.product.product_name %} по-прежнему может маршрутизировать запросы {% data variables.product.prodname_pages %} на автономный узел, снижая доступность {% data variables.product.prodname_pages %} для пользователей."
    - "Ограничения ресурсов, относящиеся к работе с обработчиками перед получением, могут служить причиной сбоев некоторых из них."
