date: '04.04.2022'
sections:
  security_fixes:
    - 'СРЕДНИЙ. Выявлена уязвимость, связанная с обходом каталога, в консоли управления {% data variables.product.prodname_ghe_server %}, позволяющая обойти защиту CSRF. Эта уязвимость затрагивала все версии {% data variables.product.prodname_ghe_server %} до 3.5. Она устранена в версиях 3.1.19, 3.2.11, 3.3.6, 3.4.1. Уязвимость стала известной в рамках программы {% data variables.product.prodname_dotcom %} Bug Bounty и получила код CVE-2022-23732.'
    - 'СРЕДНИЙ. Выявлена уязвимость целочисленного переполнения в ветви 1.х и 2.х yajil, что приводит к последующему повреждению памяти кучи при работе с большими (~2 ГБ) входными данными. Об этой уязвимости сообщено внутренне, и ей был присвоен код CVE-2022-24795. '
    - "Пакеты поддержки могут содержать конфиденциальные файлы, если включить {% data variables.product.prodname_actions %}." 
    - В пакетах обновлены системы безопасности до последних версий.
  bugs:
    - "Выполнение рабочего процесса могло не завершиться, если в нем используются составные действия."
    - "При включении {% data variables.product.prodname_dependabot %} возникла ошибка, из-за которой некоторые рекомендации по безопасности временно считались неприменимыми."
    - "Процессы MinIO будут иметь высокую загрузку ЦП, если после обновления {% data variables.product.prodname_ghe_server %} присутствует старый параметр конфигурации."
    - "Были показаны параметры для включения TLS 1.0 и TLS 1.1 в настройках конфиденциальности консоли управления, хотя удаление этих версий протокола произошло в более ранней версии."
    - "В среде с высокой доступностью для настройки репликации MSSQL могут потребоваться дополнительные действия вручную после первого включения {% data variables.product.prodname_actions %}."
    - Подмножество внутренних файлов конфигурации более надежно обновляется после горячего исправления. 
    - Скрипт ghe-run-migrations иногда не может правильно генерировать имена временных сертификатов. 
    - "Время ожидания перехватчиков предварительного получения, которые использовали gpg --import, истекло из-за недостаточных привилегий syscall."
    - В некоторых топологиях кластера сведения о доставке веб-перехватчиков была недоступна. 
    - "Граф развертывания {% data variables.product.prodname_actions %} отображает ошибку во время преобразования для просмотра ожидающего задания." 
    - Проверки работоспособности Elasticsearch не допускают желтое состояние кластера при выполнении миграции. 
    - "При использовании [API миграции](/rest/reference/migrations) не обрабатывались поставленные в очередь задания экспорта."
    - "Репозитории могли отображать нефункциональную вкладку \"Обсуждения\" в веб-интерфейсе." 
    - "Организации, созданные в результате преобразования пользователем своей учетной записи в организацию, не добавляются в глобальную корпоративную учетную запись." 
    - При попытке синхронизации ранее синхронизированных ключей GPG задания синхронизации пользователей LDAP завершались сбоем. 
    - Ссылки на недоступные страницы удалены. 
    - Некоторые экземпляры испытывали высокую нагрузку на ЦП из-за большого количества ненужных фоновых заданий в очереди. 
    - Пустые репозитории неправильно синхронизировались с серверами кэша. 
    - Добавление команды в качестве рецензента в запрос на вытягивание иногда отображает неправильное количество участников в этой команде. 
    - "При попытке удалить члена команды, управляемого извне через SCIM Group, конечная точка API для удаления члена команды выдавала ошибку." 
    - "Большое количество неактивных пользователей могло приводить к сбою конфигурации {% data variables.product.prodname_github_connect %}." 
    - "Страница \"Регистрация возможностей и бета-версий\" в пользовательском веб-интерфейсе администратора сайта была доступна, однако не должным образом." 
    - "Ссылка \"Режим администратора сайта\" в нижнем колонтитуле сайта не изменила состояние после щелчка." 
  changes:
    - "Ограничения на подключения Memcached были увеличены, чтобы лучше соответствовать топологиям больших кластеров." 
    - API графа зависимостей ранее работал со статически определенным портом. 
    - Количество сегментов по умолчанию для связанных с кластером настроек сегментов Elasticsearch было обновлено. 
    - "[API миграции](/rest/reference/migrations) теперь производит экспорт репозиториев." 
    - "Улучшен текст для пунктов раскрывающегося меню, который появлялся при фильтрации участников предприятия по роли в организации на странице \"Люди\"." 
    - "Роли команд \"Рассмотрение\" и \"Обслуживание\" сохраняются при миграциях репозитория." 
    - При использовании ghe-migrator или экспорте с GitHub.com экспорт не будет включать в себя вложения запроса на вытягивание. 
    - "Для веб-запросов, созданных владельцами предприятий, была улучшена производительность." 
  known_issues:
    - "Злоумышленник мог создать первого пользователя с правами администратора на только что настроенном экземпляре {% data variables.product.prodname_ghe_server %} без пользователей."
    - Настраиваемые правила брандмауэра удаляются в процессе обновления.
    - "Отслеживаемые файлы Git LFS, [отправленные через веб-интерфейс](https://github.com/blog/2105-upload-files-to-your-repositories), ошибочно добавлялись напрямую в репозиторий."
    - "Проблемы нельзя закрыть, если они содержат постоянную ссылку на большой двоичный объект в том же репозитории, где путь к файлу большого двоичного объекта превышает 255 символов."
    - "Когда параметр Users can search GitHub.com (Пользователи могут выполнять поиск на GitHub.com) включен с {% data variables.product.prodname_github_connect %}, проблемы в частных и внутренних репозиториях не включаются в результаты поиска в {% data variables.product.prodname_dotcom_the_website %}."
    - "Реестр npm {% data variables.product.prodname_registry %} больше не возвращает значение времени в ответах метаданных. Это изменение позволяет существенно улучшить производительность. Мы продолжим хранить все данные, необходимые для возврата значения времени в качестве части ответа метаданных, и возобновим возврат этого значения в будущем, как только решим существующие проблемы с производительностью."
    - "Ограничения ресурсов, относящиеся к обработке перехватчиков перед получением, могут приводить к сбою некоторых из них."
    - |После регистрации с использованием параметра --ephemeral на нескольких уровнях (например, для предприятия и организации) локальное средство выполнения тестов может зависнуть в состоянии бездействия и тогда его потребуется повторно зарегистрировать. [Обновлено: 17.06.2022]

|
    - |При использовании зашифрованных утверждений SAML с {% data variables.product.prodname_ghe_server %} 3.4.0 и 3.4.1 новый атрибут XML WantAssertionsEncrypted в SPSSODescriptor содержит недопустимый атрибут для метаданных SAML. У поставщиков удостоверений, использующих эту конечную точку метаданных SAML, могут возникать ошибки при проверке схемы XML метаданных SAML. Исправление будет доступно в следующем выпуске исправлений. [Обновлено: 11.04.2022]



Во избежание этой проблемы можно выполнить одно из следующих действий.

— Выполнить повторную настройку поставщика удостоверений путем передачи статической копии метаданных SAML без атрибута WantAssertionsEncrypted.

— Копировать метаданные SAML, удалить атрибут WantAssertionsEncrypted, разместить его на веб-сервере и выполнить повторную настройку поставщика удостоверений, чтобы он указывал на этот URL-адрес.

|
    - '{% data reusables.release-notes.ghas-3.4-secret-scanning-known-issue %}'
  deprecations:
    - heading: Прекращение поддержки GitHub Enterprise Server 3.0
      notes:
        - '**Поддержка {% data variables.product.prodname_ghe_server %} 3.0 прекращена 16 февраля 2022 г.** Это значит, что после этой даты исправления не будут выпускаться даже для устранения критических проблем безопасности. Чтобы улучшить производительность, безопасность и получить новые возможности, как можно быстрее [выполните обновлении до самой последней версии {% data variables.product.prodname_ghe_server %}](/enterprise-server@3.4/admin/enterprise-management/upgrading-github-enterprise-server).'
    - heading: Прекращение поддержки GitHub Enterprise Server 3.1
      notes:
        - '**Поддержка {% data variables.product.prodname_ghe_server %} 3.1 прекращена 3 июня 2022 г.**. Это значит, что после этой даты исправления не будут выпускаться даже для устранения критических проблем безопасности. Чтобы улучшить производительность, безопасность и получить новые возможности, как можно быстрее [выполните обновлении до самой последней версии {% data variables.product.prodname_ghe_server %}](/enterprise-server@3.4/admin/enterprise-management/upgrading-github-enterprise-server).'

    - heading: Прекращение поддержки гипервизора XenServer
      notes:
        # https://github.com/github/docs-content/issues/4439
        - "Начиная с {% data variables.product.prodname_ghe_server %} 3.3, прекращена поддержка {% data variables.product.prodname_ghe_server %} в XenServer. Обратитесь в [службу поддержки GitHub](https://support.github.com), если у вас есть вопросы или замечания."

    - heading: Прекращение поддержки предварительной версии API вложений содержимого
      notes:
        #
        - "Ввиду низкого уровня использования прекращена поддержка предварительной версии API вложений содержимого в {% data variables.product.prodname_ghe_server %} 3.4. Ранее этот API был доступен по заголовку \"corsair-preview\". Пользователи могут и далее переходить по внешним URL-адресам и без этого API. Зарегистрированные использования API вложений содержимого больше не будут получать оповещение от веб-перехватчика для URL-адресов из зарегистрированных доменов, а мы больше не будем возвращать допустимые коды откликов для попыток выполнить обновления существующих вложений содержимого."

    - heading: Прекращение поддержки предварительной версии API правил поведения
      notes:
        # https://github.com/github/releases/issues/1708
        - 'Поддержка предварительной версии API правил поведения, которая была доступна по заголовку "scarlet-witch-preview", прекращена и она больше не доступна в {% data variables.product.prodname_ghe_server %} 3.4. Вместо этого мы рекомендуем использовать конечную точку "[Получение метрик профиля сообщества](/rest/reference/repos#get-community-profile-metrics)" для извлечения сведений о коде правилах поведения репозитория. Дополнительные сведения см. в статье "[Уведомление о прекращении поддержки: предварительная версия API правил поведения](https://github.blog/changelog/2021-10-06-deprecation-notice-codes-of-conduct-api-preview/)" в журнале изменений {% data variables.product.prodname_dotcom %}.'

    - heading: Прекращение поддержки конечных точек API приложения OAuth и проверки подлинности API с использованием параметров запроса
      notes:
        # https://github.com/github/releases/issues/1316
        - |Начиная с {% data variables.product.prodname_ghe_server %} 3.4, удалена [нерекомендуемая версия конечных точек API приложения OAuth Application API](https://developer.github.com/changes/2020-02-14-deprecating-oauth-app-endpoint/#endpoints-affected). В случае возникновения в этих частных точках сообщений об ошибке 404 преобразуйте ваш код в версии API приложения OAuth, в URL-адресе которой нет "access_tokens". Мы также отключили использование проверки подлинности API с помощью параметров запроса. Вместо этого рекомендуем использовать [проверку подлинности API в заголовке запроса](https://developer.github.com/changes/2020-02-10-deprecating-auth-through-query-param/#changes-to-make).

|
    - heading: Прекращение поддержки средства выполнения тестов CodeQL
      notes:
        # https://github.com/github/releases/issues/1632
        - "Средство выполнения тестов {% data variables.product.prodname_codeql %} больше не поддерживается в {% data variables.product.prodname_ghe_server %} 3.4. Прекращение поддержки касается только тех пользователей, которые используют сканирование кода {% data variables.product.prodname_codeql %} в сторонних системах непрерывной поставки и непрерывной интеграции. Это не относится к пользователям {% data variables.product.prodname_actions %}. Мы настоятельно рекомендуем клиентам перейти на CLI {% data variables.product.prodname_codeql %}, возможности которого полностью заменяют средство выполнения тестов {% data variables.product.prodname_codeql %}. Дополнительные сведения см. в статье [{% data variables.product.prodname_dotcom %} changelog](https://github.blog/changelog/2021-09-21-codeql-runner-deprecation/)."

    - heading: Прекращение поддержки пользовательских расширений кэша битов
      notes:
        # https://github.com/github/releases/issues/1415
        - |Начиная с {% data variables.product.prodname_ghe_server %} 3.1, постепенно прекращается поддержка защищаемых расширений кэша битов {% data variables.product.company_short %}. Эти расширения являются устаревшими в {% data variables.product.prodname_ghe_server %} 3.3 и более поздних версий.



Все репозитории, которые уже существовали и были активны в {% data variables.product.product_location %} версии 3.1 или  3.2, будут автоматически обновлены.



Репозитории, которые еще не существовали и не были активны до обновления до {% data variables.product.prodname_ghe_server %} 3.3, могут не демонстрировать оптимальную производительность, пока задача обслуживания репозитория не будет запущена и успешно выполнена.



Чтобы запустить задачу обслуживания репозитория вручную, перейдите по адресу https://<hostname>/stafftools/repositories/<owner>/<repository>/network для каждого затронутого репозитория и нажмите кнопку "Запланировать".

|
  backups:
    - 'Для {% data variables.product.prodname_ghe_server %} 3.4 требуется по крайней мере [техническое оборудование для резервного копирования GitHub Enterprise версии 3.4.0](https://github.com/github/backup-utils) для [резервного копирования и аварийного восстановления](/admin/configuration/configuring-your-enterprise/configuring-backups-on-your-appliance).'
