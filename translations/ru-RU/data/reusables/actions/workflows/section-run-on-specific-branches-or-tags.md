---
ms.openlocfilehash: 4e50754bfa8075681d503e689df630855eedbbab
ms.sourcegitcommit: fcf3546b7cc208155fb8acdf68b81be28afc3d2d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2022
ms.locfileid: "145089106"
---

При использовании события `push` можно настроить выполнение рабочего процесса в определенных ветвях или тегах.

Используйте фильтр `branches`, если требуется включить шаблоны имен ветвей или как включить, так и исключить их. Используйте фильтр `branches-ignore`, если требуется только исключить шаблоны имен ветвей. Для одного и того же события в рабочем процессе нельзя использовать фильтры `branches` и `branches-ignore` одновременно.

Используйте фильтр `tags`, если требуется включить шаблоны имен тегов или как включить, так и исключить их. Используйте фильтр `tags-ignore`, если требуется только исключить шаблоны имен тегов. Для одного и того же события в рабочем процессе нельзя использовать фильтры `tags` и `tags-ignore` одновременно.

Если вы определяете только `tags`/`tags-ignore` или только `branches`/`branches-ignore`, рабочий процесс не будет выполняться для событий, затрагивающих не определенную ссылку Git. Если вы не определили ни `tags`/`tags-ignore`, ни `branches`/`branches-ignore`, рабочий процесс будет выполняться для событий, затрагивающих все ветви или теги. Если вы определили и `branches`/`branches-ignore`, и [`paths`](#onpushpull_requestpull_request_targetpathspaths-ignore), рабочий процесс будет запускаться только в случае, если выполнены оба фильтра.

Ключевые слова `branches`, `branches-ignore`, `tags`и `tags-ignore` принимают стандартные маски, использующие такие символы, как `*`, `**`, `+`, `?`, `!` и другие, для сопоставления нескольких имен ветвей или тегов. Если имя содержит любой из этих символов, и требуется буквальное совпадение, необходимо *экранировать* каждый из этих специальных символов с помощью `\`. Дополнительные сведения о стандартных масках см. в разделе [Краткий справочник по шаблонам фильтров](/actions/using-workflows/workflow-syntax-for-github-actions#filter-pattern-cheat-sheet).

#### Пример. Включение ветвей и тегов

Шаблоны, определенные в `branches` и `tags`, применяются для имени ссылки Git. Например, следующий рабочий процесс будет выполняться всякий раз, когда событие `push` происходит в:

- ветви с именем `main` (`refs/heads/main`);
- ветви с именем `mona/octocat` (`refs/heads/mona/octocat`);
- ветви, имя которой начинается с `releases/`, например `releases/10` (`refs/heads/releases/10`);
- теге с именем `v2` (`refs/tags/v2`);
- теге, имя которого начинается с `v1.`, например `v1.9.1` (`refs/tags/v1.9.1`).

```yaml
on:
  push:
    # Sequence of patterns matched against refs/heads
    branches:    
      - main
      - 'mona/octocat'
      - 'releases/**'
    # Sequence of patterns matched against refs/tags
    tags:        
      - v2
      - v1.*
```

#### Пример. Исключение ветвей и тегов

Если шаблон соответствует шаблону `branches-ignore` или `tags-ignore`, рабочий процесс не будет выполняться. Шаблоны, определенные в `branches` и `tags`, применяются для имени ссылки Git. Например, следующий рабочий процесс будет выполняться всякий раз, когда происходит событие `push`, если при этом не происходит событие `push` в:

- ветви с именем `mona/octocat` (`refs/heads/mona/octocat`);
- ветви, имя которой соответствует `releases/**-alpha`, например `beta/3-alpha` (`refs/releases/beta/3-alpha`);
- теге с именем `v2` (`refs/tags/v2`);
- теге, имя которого начинается с `v1.`, например `v1.9` (`refs/tags/v1.9`).

```yaml
on:
  push:
    # Sequence of patterns matched against refs/heads
    branches-ignore:    
      - 'mona/octocat'
      - 'releases/**-alpha'
    # Sequence of patterns matched against refs/tags
    tags-ignore:        
      - v2
      - v1.*
```

#### Пример. Включение и исключение ветвей и тегов

Вы не можете использовать `branches` и `branches-ignore` для фильтрации одного и того же события в одном рабочем процессе. Аналогично, вы не можете использовать `tags` и `tags-ignore` для фильтрации одного и того же события в одном рабочем процессе. Если вы хотите одновременно включить и исключить шаблоны ветвей или тегов для одного события, используйте фильтр `branches` или `tags` с символом `!`, чтобы указать, какие ветви или теги следует исключить.

Если вы определяете ветвь с символом `!`, необходимо также определить по крайней мере одну ветвь без символа `!`. Если вы хотите только исключить ветви, используйте вместо этого `branches-ignore`. Аналогично, если вы определяете тег с символом `!`, необходимо также определить по крайней мере один тег без символа `!`. Если вы хотите только исключить теги, используйте вместо этого `tags-ignore`.

Порядок определения шаблонов имеет значение.

- Соответствующий отрицательный шаблон (с префиксом `!`) после положительного совпадения исключает ссылку Git.
- Соответствующий положительный шаблон после отрицательного совпадения снова включает ссылку Git.

Следующий рабочий процесс будет выполняться при отправке в `releases/10` или `releases/beta/mona`, но не в `releases/10-alpha` или `releases/beta/3-alpha`, потому что за положительным шаблоном следует отрицательный шаблон `!releases/**-alpha`.

```yaml
on:
  push:
    branches:
      - 'releases/**'
      - '!releases/**-alpha'
```
